---
title: "¬øDonde est√°n los cuadros de Goya? Un an√°lisis con datos de Wikidata"
subtitle: | 
  Un an√°lisis con datos de Wikidata sobre la ubicaci√≥n de los cuadros de Goya en el mundo. Es imporatnte que recorde√≠s que uso datos de Wikidata y que yo no soy, para nada, experto en Goya.
date: 2024-03-25
categories: [Wikidata, SPARQL, obras de Goya]
image: "imagenes/thumbnail.jpg"
---


```{r}
#| include: false
library(tidyverse)
library(rvest)
library(wikifacts) 
```

## Intro

Creo/espero que, en breve, hagamos un trabajo medio serio sobre sesgo de genero en premios literarios, ser√° algo relacionado con [esto](https://perezp44.github.io/slides.2023/jornadasR_2023_barcelona/index.html#/title-slide) pero m√°s en formato art√≠culo cient√≠fico.

Para ello, quiero refrescar c√≥mo hacer consultas a [Wikidata](https://www.wikidata.org/), as√≠ que aqu√≠ voy a jugar un poco con Wikidata y [SPARQL](https://es.wikipedia.org/wiki/SPARQL), el lenguaje que permite hacer consultas a Wikidata, para obtener informaci√≥n sobre las obras de Goya.

En lugar de empezar directamente a rehacer mis consultas sobre premios literarios, se me ha ocurrido practicar recopilando datos sobre las obras de [Goya](https://es.wikipedia.org/wiki/Francisco_de_Goya) que est√°n documentadas en Wikidata. La idea es hacer con ellos 2 ejercicios: 1) un mapa para ver como est√°n repartidas por el mundo las obras de Goya, y 2) hacer un collage con todas, bueno, ya veremos si todas o solo con unas pocas, las obras de Goya que tengan una imagen accesible desde Wikidata.


Pero ¬øy esto no est√° ya hecho? No lo s√©, seguramente s√≠, pero seguro que tambi√©n de forma diferente a como lo voy a hacer yo. Os recuerdo que yo no soy para nada un experto en Goya: repito, el objetivo del post solamente es aprender/recordar a hacer consultas a Wikidata.

Y ... ¬øporqu√© Goya? Pues porque me gusta Goya; ¬øa quien no? ¬øverdad? Adem√°s, soy aragon√©s y he estado en Fuendetodos y ...  adem√°s, hace como 2 a√±os, se hizo un taller sobre Goya en mi pueblo, [Pancrudo](https://www.pancrudo.com/). Uno de los encargados del taller era mi sobrino [David Sancho](https://davidsancho83.myportfolio.com/) ... adem√°s, una de las ilustraciones del taller era el cuadro de Goya [Ni√±os con perros de presa](https://fundaciongoyaenaragon.es/obra/ninos-con-perros-de-presa/64). En el cuadro se ven 2 ni√±os y **2 mastines**. ¬øEres capaz de ver el segundo mast√≠n? nosotros no lo ve√≠amos hasta que otro sobrino mio, Adr√≠√°n Tena, se dio cuenta. Vamos que me ha salido "espontaneo" hacer el post sobre Goya, aunque el objetivo es *to learn sobre Wikidata y SPARQL*.


<br>

## Obras de Goya

Antes de ir a Wikidata he mirado en la Web para documentarme un poco sobre Goya y sus obras. Lo primero que me hubiese gustado saber es cuantas obras de Goya, pero no me ha resultado f√°cil averiguarlo. En la [Fundaci√≥n Goya en Arag√≥n](https://fundaciongoyaenaragon.es/) hay un [cat√°logo](https://fundaciongoyaenaragon.es/catalogo/) pero en el poco tiempo que le he dedicado no he podido ver el n√∫mero de obras que contiene. Igual les pregunto por mail. Vorem!! 

Lo segundo que se me ha ocurrido es preguntar a una IA y me ha contestado lo siguiente:

> Es dif√≠cil proporcionar un n√∫mero exacto de obras de Francisco de Goya en el mundo, ya que su obra es extensa y algunas piezas pueden estar en colecciones privadas o en lugares menos accesibles. Sin embargo, se estima que Goya produjo alrededor de 700 pinturas y m√°s de 2800 dibujos a lo largo de su carrera. 


Despu√©s he ido a la Wikipedia y he encontrado un [anexo](https://es.wikipedia.org/wiki/Anexo:Cuadros_de_Goya) con 422 cuadros/obras de Goya. Adem√°s, tambi√©n en la Wikipedia, hay una [categor√≠a de "Cuadros de Goya"](https://es.wikipedia.org/wiki/Categor%C3%ADa:Cuadros_de_Francisco_de_Goya) con 143 registros, as√≠ que parece que hay 143 obras de Goya con su propia p√°gina en Wikipedia; por ejemplo [aqu√≠](https://es.wikipedia.org/wiki/La_captura_del_bandido_%E2%80%9CMaragato%E2%80%9D_por_fray_Pedro_de_Zaldivia) est√° en la p√°gina de Wikipedia  del cuadro  titulado "La captura del bandido 'Maragato' por fray Pedro de Zaldivia".^[En realidad, "La captura del bandido Maragato por fray Pedro de Zaldivia", es una serie de 6 cuadros.]

Como veis, no es tan-tan f√°cil^[Al menos no ha sido instant√°neo para mi.] obtener, para un profano en el tema, el n√∫mero de obras de Goya que existen en el mundo. 

Repito, mi objetivo es simplemente ver cuantas obras de Goya est√°n registradas en Wikidata y jugar un poco con ellas para recordar SPARQL.

Los √≠tems/objetos de Wikidata pueden tener identificadores que los conectan a bases de datos externas; por ejemplo, algunas de las obras de Goya existentes en Wikidata tienen un identificador que los vincula con la base de datos de la [Fundaci√≥n Goya en Arag√≥n](https://fundaciongoyaenaragon.es/). El c√≥digo de Wikidata para el identificador es [P7229](https://www.wikidata.org/wiki/Property:P7229).

<br>

## Obras de Goya en Wikidata

S√≠ buscamos el n√∫mero de obras de Goya en Wikidata, podemos hacerlo con la siguiente consulta SPARQL:

```sql
#obras de Goya
SELECT DISTINCT ?item ?itemLabel ?itemDescription
WHERE {
    ?item  wdt:P170 wd:Q5432.   # items cuyo creador es Goya
    SERVICE wikibase:label { bd:serviceParam wikibase:language "es", "en", "de", "fr", "it" }
}
```

Si quieres ejecutar la consulta, puedes hacerlo [aqu√≠](https://w.wiki/9Y$M).^[S√≥lo tienes que pinchar en la flecha/triangulito.] En su d√≠a, en marzo de 2024, yo obtuve **1.052 registros**. Estas son las obras de Goya que est√°n registradas en Wikidata. Muchas menos de las que me dijo la IA.


Pues ya estar√≠a, pero ... vamos a enriquecer un poco m√°s la informaci√≥n sobre estas obras; voy a tratar de incorporar informaci√≥n sobre donde est√° el cuadro/obra (museo, ciudad y pa√≠s), cuando se cre√≥, si existe una imagen de la obra en Wikidata, etc ...

Al final me decid√≠ por esta consulta: 

```{sql}
#| eval: false
#obras de Goya
SELECT DISTINCT ?item ?itemLabel ?itemDescription  ?paisLabel ?ciudadLabel ?link_esp ?link_eng 
                ?ubicacionLabel ?long ?lat ?idGoya ?image  (year(?date) as ?year) 
WHERE {
    ?item  wdt:P170 wd:Q5432;   # items cuyo creador es Goya
           wdt:P276 ?ubicacion.  

    ?ubicacion wdt:P131 ?ciudad.
    ?ciudad wdt:P17 ?pais.
  
    ?ubicacion p:P625 ?coords .
    ?coords psv:P625 ?coordinate_node .
    ?coordinate_node wikibase:geoLatitude ?lat .
    ?coordinate_node wikibase:geoLongitude ?long .               
  
    OPTIONAL { ?item wdt:P7229 ?idGoya}       # id en Fundaci√≥n Goya en Arag√≥n
    OPTIONAL { ?item wdt:P18 ?image }         # con imagen
    OPTIONAL { ?item wdt:P571 ?date }         # con fecha de creacion
    #OPTIONAL { ?item wdt:P195/wdt:P361* ?coleccion }  # la colecci√≥n

    OPTIONAL {  ?link_esp schema:about ?item;
         schema:isPartOf <https://es.wikipedia.org/>;} #- link en Wikipedia espa√±ola
    OPTIONAL {  ?link_eng schema:about ?item;
         schema:isPartOf <https://en.wikipedia.org/>;} #- link en Wikipedia inglesa
 
    SERVICE wikibase:label { bd:serviceParam wikibase:language "es", "en", "de", "fr", "it" }
}

ORDER BY desc(?year)
```


La query la fui refinando en el [Wikidata Query Serive](https://query.wikidata.org/), pero cuando tuve la versi√≥n final, ejecute la consulta desde R con la funci√≥n `wikifacts::wiki_query()`. Algo como:


```{r}
#| eval: false

my_query_goya <- '#obras de Goya
SELECT DISTINCT ?item ?itemLabel ?itemDescription  ?paisLabel ?ciudadLabel ?link_esp ?link_eng 
                ?ubicacionLabel ?long ?lat ?idGoya ?image  (year(?date) as ?year) 
WHERE {
    ?item  wdt:P170 wd:Q5432;   # items cuyo creador es Goya
           wdt:P276 ?ubicacion.  

    ?ubicacion wdt:P131 ?ciudad.
    ?ciudad wdt:P17 ?pais.
  
    ?ubicacion p:P625 ?coords .
    ?coords psv:P625 ?coordinate_node .
    ?coordinate_node wikibase:geoLatitude ?lat .
    ?coordinate_node wikibase:geoLongitude ?long .               
  
    OPTIONAL { ?item wdt:P7229 ?idGoya}       # id en Fundaci√≥n Goya en Arag√≥n
    OPTIONAL { ?item wdt:P18 ?image }         # con imagen
    OPTIONAL { ?item wdt:P571 ?date }         # con fecha de creacion
    #OPTIONAL { ?item wdt:P195/wdt:P361* ?coleccion }  # la colecci√≥n

    OPTIONAL {  ?link_esp schema:about ?item;
         schema:isPartOf <https://es.wikipedia.org/>;} #- link en Wikipedia espa√±ola
    OPTIONAL {  ?link_eng schema:about ?item;
         schema:isPartOf <https://en.wikipedia.org/>;} #- link en Wikipedia inglesa
 
    SERVICE wikibase:label { bd:serviceParam wikibase:language "es", "en", "de", "fr", "it" }
}

ORDER BY desc(?year)'

df_goya <- wikifacts::wiki_query(my_query_goya)  
```


La consulta la hice el 25 de marzo de 2024 obteniendo **1.088 registros**, pero hay que tener en cuenta que no son registros √∫nicos de obras de Goya porque pueden haber obras de Goya en Wikidata con, por ejemplo, 2 registros para las coordenadas, o para la fecha de creaci√≥n, o ...^[S√≠, ni el mundo ni Wikidata son perfectos, pero ... el mundo es, de momento, el √∫nico que tenemos y Wikidata es, a pesar de todos sus "fallos", **super-FABULOSA**. Ojala mejoren los 2, tanto el mundo como Wikidata!!]. 

Realmente con mi "final-query" consegu√≠ recuperar **799 obras** de Goya **distintas**. ¬øQue porqu√© 799 si con la primera query sal√≠an 1.052 obras? Pues porqu√© en mi query final obligo a que las obras tengan registrado donde se encuentran; es decir, su localizaci√≥n. Recuerda que el objetivo es ver en un mapa donde est√°n las obras actualmente y despues hacer un collage con las que tengan imagen.


## ¬øDonde est√°n las obras de Goya?


```{r}
#| include: false
#my_ruta_datos_orig <- fs::dir_ls(here::here("datos", "orig_wikidata"))
my_ruta_datos_orig <- fs::dir_ls("./datos/orig_wikidata")

df_orig <- rio::import(my_ruta_datos_orig)
```

Ya tengo los datos de las obras de Goya en Wikidata que tienen registrada su localizaci√≥n, pero antes de mirarlos, he buscado en la Web y he encontrado art√≠culos/posts que hablan del tema. Por ejemplo:

- [D√≥nde ver los cuadros de Goya a lo largo del mundo](https://www.liligo.es/magazine-viajes/donde-ver-los-cuadros-de-goya-a-lo-largo-del-mundo-164709.html)], en este post del "El Magazine del Viajero" se indican los 6 museos donde m√°s obras de Goya hay: Museo del Prado, Museo L√°zaro Galdiano (Madrid), Museo de la Academia de Bellas Artes de San Fernando (Madrid), National Gallery (Londres), Metropolitan Museum of Art de Nueva York y National Gallery de Washington, adem√°s de se√±alar los principales cuadros de Goya existentes en ellos; 

- [Goyas por el mundo: todos los lugares (que no son pocos) a los que llega el pintor aragon√©s](https://www.enjoyzaragoza.es/goyas-por-el-mundo/) es un post de "Enjoy Zaragoza" donde indica los principales museos del mundo, empezando por los de Arag√≥n, donde se pueden ver obras de Goya

- [La capital a pinceladas de Francisco de Goya](https://www.guiarepsol.com/es/viajar/nos-gusta/el-madrid-de-goya/) 
- [Goya en Madrid: una ruta por sus obras maestras en la capital](https://saltaconmigo.com/blog/2020/09/goya-en-madrid/),

- [Los 5 lugares donde ver obras de Francisco de Goya sin salir de Zaragoza](https://hoyaragon.es/cultura-aragon/donde-ver-obras-de-goya-en-zaragoza/).


Todos ellos muy interesantes pero ... me hubiese gustado ver algo m√°s cuantitativo, algo como una tabla con el n√∫mero de obras que hay en cada museo. Vamos a ello.


Os recuerdo que tengo informaci√≥n de la localizaci√≥n (museo, ciudad y pa√≠s) de 799 obras de Goya que est√°n registradas en Wikidata. Vamos a ver cuantas obras hay en cada museo. 

Como no puede ser de otra manera, hay problemillas con los datos que he obtenido de Wikidata, por ejemplo, hay 14 obras de Goya que en Wikidata figuran que est√°n ubicadas en varios museos. Por ejemplo, [Contra el bien general](https://www.wikidata.org/wiki/Q47533444) tiene registradas en Wikidata 3 ubicaciones: Museo Boymans Van Beuningen, Chester Beatty Library y Museo de Arte de Cleveland. ¬øQu√© donde est√° realmente? No lo s√©, he mirado un poco y creo que est√° en Cleveland pero ... no estoy seguro 100%. Recordad que soy un profano en Goya y el objetivo es solo jugar un poco; es o s√≠, a√∫n as√≠, creo que los resultados que obtengamos van a ser interesantes.

Otros "fallos" en la informaci√≥n que he recogido de Wikidata son debidos a mis conocimientos de Wikidata y SPARQL: por ejemplo, el cuadro [La familia de Carlos IV](https://www.wikidata.org/wiki/Q920030) figura en Wikidata en 2 ubicaciones: Museo del Prado y Palacio Real. ¬øQu√© donde est√°? pues en la actualidad en el Museo del Prado, pero en 1814, seg√∫n Wikidata, estaba en el Palacio Real. Podr√≠a haber filtrado las ubicaciones para que mi consulta solo recogiese la ubicaci√≥n actual, pero no se me ocurri√≥ y ahora ya quiero ir cerrando el post. Lo tendr√© en cuenta para pr√≥ximas consultas a Wikidata.


Algo similar ocurre con la ciudad en la que est√°n ubicadas las obras de Goya seg√∫n Wikidata: hay 35 obras que, en mi consulta a Wikidata, figuran como que est√°n en 2 "municipios". En realidad lo que ocurre es que mi consulta ha recogido la ubicaci√≥n m√°s precisa (por ejemplo el barrio o distrito), adem√°s de la ciudad en la que est√° la obra ^[Como veis este fallo tambi√©n se debe a que Wikidata, muchas veces, tiene informaci√≥n muy precisa y exhaustiva, junto a que mis conocimientos de la taxonom√≠a de Wikidata y de SPARQL los tengo un poco oxidados, pero estoy pr√°cticando!!. Esto tambi√©n pod√≠a haberlo evitado, o eso creo, puliendo un poco m√°s mi consulta a Wikidata, pero tambi√©n lo tendr√© en cuenta en futuras consultas ... üòÖ].


¬øQu√© c√≥mo lo he arreglado? Pues he decidido eliminar las obras que ten√≠an problemas/duplicidades en su ubicaci√≥n^[Muerto el peroo muerta la rab√≠a]. De esta forma pasamos de un total de 799 obras a 756: tampoco hemos perdido tanto, s√≥lo he dejado fuera a cuadros como [Contra el bien general](https://www.wikidata.org/wiki/Q47533444) o [La familia de Carlos IV](https://www.wikidata.org/wiki/Q920030), nah!!! üòÖ


Despu√©s de todo este proceso de "limpieza" de los datos, me quedo con un conjunto de datos con 756 obras de Goya que sabemos en que museo, ciudad y pa√≠s est√°n; al menos seg√∫n la informaci√≥n que hay en Wikidata. Veamos donde est√°n: ¬øen Zaragoza, en Madrid?



```{r}
#| include: false
#- MAPA ------------------------------------------------------------------------
#- algunos cuadros. Por ejmeplo: https://www.wikidata.org/wiki/Q47533444  est√°n en 3 ubicaciones  y por tanto, cuando recupero el pais salen 3 paises
zz <- df_orig %>% filter(item == "http://www.wikidata.org/entity/Q47533444")

#- Hay 7 ( 1 con 3 y 6 con 2) cuadros con varias ubicaciones

##- cuadros en varios museos ----
zz_varios_museos_id <- df_orig %>%  #- obtengo los id's de los cuadros que est√°n en varios museos
  distinct(item, itemLabel, ubicacionLabel) %>% 
  group_by(item, itemLabel) %>% summarise(n = n()) %>% 
  arrange(desc(n)) %>% filter(n > 1)  %>% pull(1) #- 14 id's

# veo los cuadros q est√°n en varios museos
zz_varios_museos <- df_orig %>% filter(item %in% zz_varios_museos_id) %>% 
  select(1:2, paisLabel, ciudadLabel, ubicacionLabel) %>% distinct()  #- 29 registros

gt::gt(zz_varios_museos)

##- quito esos 14 cuadros (q tienen ubicaci√≥n en varios museos)
df_orig_x <- df_orig %>% filter(!item %in% zz_varios_museos_id)


##- cuadros en varios ciudades ----
#- ahora ya empiezo en df_orig_x
zz_varias_ciudades_id <- df_orig_x %>%  #- obtengo los id's de los cuadros que est√°n en varios ciudades
  distinct(item, itemLabel, ciudadLabel) %>% 
  group_by(item, itemLabel) %>% summarise(n = n()) %>% 
  arrange(desc(n)) %>% filter(n > 1)  %>% pull(1) #- 29 id's

# veo los cuadros q est√°n en varias ciudades
zz_varias_ciudades <- df_orig_x %>% filter(item %in% zz_varias_ciudades_id) %>% 
  select(1:2, paisLabel, ciudadLabel, ubicacionLabel) %>% distinct()  #- 61 registros

gt::gt(zz_varias_ciudades)

# quito los cuadros con varias ciudades
df_orig_x <- df_orig_x %>% filter(!item %in% zz_varias_ciudades_id) #- 958 rows
zz <- df_orig_x %>% janitor::tabyl(ciudadLabel)
#- cuantos id's unicos quedan
zz <- df_orig_x %>% distinct(item)  #- 754 , pero deberian ser 756 = 799 - (14 + 29)


##- cuadros en varios pa√≠ses ----
zz_varios_paises_id <- df_orig_x %>%  #- obtengo los id's de los cuadros que est√°n en varios paises
  distinct(item, itemLabel, paisLabel) %>% 
  group_by(item, itemLabel) %>% summarise(n = n()) %>% 
  arrange(desc(n)) %>% filter(n > 1) %>% pull(1) #- no hay, asi q no quito nada

#- ya no me caliento el cap m√°s con los duplicados

#- OK ya empiezo el an√°lisis de las ubicaciones (habiendo quitado los duplicados)
#- En df_orig_x quedan 756 cuadros √∫nicos, PERO 958 rows (puede ser x imagens etc)
#- ME QUEDO CON LA PRIMERA ROW DE CADA CUADRO

df_ubicaciones <- df_orig_x %>% distinct(item, .keep_all = TRUE) #-

```

### Mapa con la ubicaci√≥n de los museos con obras de Goya


Lo primero que voy a mostrar es un **mapa con la situaci√≥n geogr√°fica** de todos los museos/ubicaciones donde hay alguna obra de Goya. El mapa es muy sencillito^[Alg√∫n d√≠a lo mejorar√©!! Ya te digo yo que s√≠ üòÖ .], se podr√≠a mejorar mucho, por ejemplo, haciendo que en los popups aparezca el n√∫mero de obras en cada museo etc... etc... pero ... no tengo tiempo, ni ganas, de hacerlo ahora. Eso s√≠, a pesar de ser sencillito se ve claramente que, si quieres ver Goyas, no te vayas a √Åfrica ni a Sudam√©rica. Si la informaci√≥n de Wikidata es cierta, no hay ning√∫n Goya en √Åfrica y **en Sudam√©rica solo se pueden ver Goyas en Argentina, concretamente 5 en Buenos Aires y 1 en Rosario. 


Si haces zoom en el mapa parece que en **Madrid** hay 10 lugares/museos donde ver obras de Goya, y en **Zaragoza** 4, me parecen pocos, seguramente haya m√°s, pero estos son los datos de los que dispongo.

<br>


```{r}
#- MAPA
df_plot <- df_ubicaciones %>% 
  sf::st_as_sf(coords = c("long", "lat"), crs = 4326)

mapview::mapview(df_plot)
```

<br>

Veamos algunas tabla. Primero una tabla con el n√∫mero de Goyas en cada museo:

```{r}
#| label: tablas
#| eval: true
zz_museos <- df_ubicaciones %>% janitor::tabyl(ubicacionLabel) 
zz_unir_museos <- df_ubicaciones %>% distinct(ubicacionLabel, ciudadLabel, paisLabel)
zz_museos <- dplyr::left_join(zz_unir_museos, zz_museos) %>% dplyr::arrange(desc(n)) %>% select(-percent)
```


### Obras de Goya por museos

La primera tabla muestra el n√∫mero de obras de Goya que hay en cada museo. Yo esperaba que el Museo del Prado fuese el que m√°s tuviese, pero no, es el Museo de Bellas Artes de Zaragoza. ¬øPorqu√©? Pues lo primero a tener en cuenta es que s√≥lo tengo las 756 obras de Goya registradas en Wikidata y que adem√°s tienen su ubicaci√≥n. S√≠, llama la atenci√≥n, al menos a mi, que el museo que mas Goyas tiene es la Galer√≠a Nacional de Arte de Washington, pero ... ¬øes correcto? No lo s√©, pero si miramos en su (cat√°logo](https://www.nga.gov/global-site-search-page.html?searchterm=Goya) parece que tiene incluso m√°s de los que pone en la tabla. Si me pongo en plan cabezota/investigador es poisble que hallase la respuesta pero no tengo tanto tiempo para este post, as√≠ que  le he preguntado a una IA y me ha dicho que:

> En la Galer√≠a Nacional de Arte de Washington, D.C., hay una colecci√≥n significativa de obras de Francisco de Goya. Sin embargo, el n√∫mero exacto de obras de Goya en exhibici√≥n puede variar debido a pr√©stamos, rotaciones de exhibiciones y otras consideraciones curatoriales. 



```{r}
DT::datatable(zz_museos,
              caption = 'Cuadro 1: N√∫mero de obras de Goya por museo',
              filter = 'top', options = list(pagegeLength = 5, autoWidth = TRUE),
              class = 'cell-border stripe',
              colnames = c('Ubicaci√≥n (museo)', 'Ciudad', 'Pa√≠s', 'N¬∫ de obras'))
```




```{r}
#| eval: false
#| echo: false
library(reactable)
reactable::reactable(zz_museos, 
    defaultColDef = colDef(headerStyle = list(background = "#f7f7f8")),
   columns = list(
       ubicacionLabel = colDef(name = "Ubicaci√≥n (Museo)"),
       ciudadLabel = colDef(name = "Ciudad"),
       paisLabel = colDef(name = "Pa√≠s"),
      n = colDef(name = "N¬∫ de obras")),
   bordered = TRUE,
  highlight = TRUE
  )

```


### Obras de Goya por ciudades


Veamos como queda el ranking de ciudades con m√°s obras de Goya^[Recuerda siempre que trabajo con los datos que hay en Wikidata.]

```{r}
#| include: false
zz_ciudades <- df_ubicaciones %>% 
  group_by(ciudadLabel, paisLabel) %>% summarise(n = n()) %>% arrange(desc(n))

zz_unir_ciudades <- df_ubicaciones %>% distinct(ciudadLabel, paisLabel) 

zz_ciudades <- left_join(zz_unir_ciudades, zz_ciudades) %>% arrange(desc(n))
```


```{r}
DT::datatable(zz_ciudades,
              caption = 'Cuadro 2: N√∫mero de obras de Goya por ciudad',
              filter = 'top', options = list(pagegeLength = 5, autoWidth = TRUE),
              class = 'cell-border stripe',
              colnames = c( 'Ciudad', 'Pa√≠s', 'N¬∫ de obras'))
```


Simplemente comentar que sigue en cabez Whatshington, en segundo lugar est√° Madrid, y R√≥terdam en tercer lugar. ¬øR√≥terdam? S√≠, R√≥terdam, tiene bastantes obras de Goya, puedes verlo en su cat√°logo [aqu√≠](https://www.boijmans.nl/en/collection/artists/7527/francisco-goya). En un, para mi, decepcionante sexto puesto aparece Zaragoza con tan s√≥lo 17 obras. Seguramente faltar√°n obras de Goya en Wikidata. De todas formas, para mi, la mejor forma de acercarse a Goya es ir a Fuendetodos, su pueblo natal, y despu√©s visitar el Prado, ü§î ¬øo mejor al rev√©s? Aunque Whashington, con 292 obras, puede estar requete-bien üòâ . 

Como nota t√©cnica para mi, y que tengo que recordar, es que tengo que refinar mis consultas de Wikidata relativas a la ubicaci√≥n. Por ejemplo, en el cuadro anterior, en lugar de aparecer Nueva York, figuran Manhattan (Museo Metropolitano de Arte, Sociedad Hisp√°nica de Am√©rica y Colecci√≥n Frick) y Brooklyn (Museo Brooklyn). Otro detalle, el Museo de Arte de Ponce, en mi consulta a Wikidata aparece como que est√° en Ponce, EE.UU, pero en realidad el municipio de Ponce est√° en la isla de Puerto Rico, oficialmente Estado Libre Asociado de Puerto Rico. Otro detalle: el Museo de Bellas Artes de Budapest, en mi consulta a Wikidata aparece como que est√° en Zugl√≥, cuando deber√≠a parecer Budapest; el problema consiste en que Zugl√≥ debe ser un distrito o barrio de Budapest. Como ve√≠s tengo que refinar mis habilidades con las queries a Wikidata, pero ... , otra vez, no ser√° ahora mismo.





### Obras de Goya por pa√≠ses

Veamos qu√© pa√≠ses tienen m√°s obras de Goya. 

```{r}
#| include: false
zz_paises <- df_ubicaciones %>% 
  group_by(paisLabel) %>% summarise(n = n()) %>% arrange(desc(n))


```



```{r}
DT::datatable(zz_paises,
              caption = 'Cuadro 3: N√∫mero de obras de Goya por pa√≠ses',
              filter = 'top', options = list(pagegeLength = 5, autoWidth = TRUE),
              class = 'cell-border stripe',
              colnames = c( 'Pa√≠s', 'N¬∫ de obras'))
```


<br>

Nada, no hay manera la Galer√≠a Nacional de Arte de Washington hace que Estados Unidos est√© en cabeza üòÆ!!


Bueno que cada cual saque sus impresiones y conclusiones ... y si alg√∫n experto en Goya lee el post, que no sea muy duro conmigo: recuerda que son datos de Wikidata y que el objetivo del post es aprender/recordar a hacer consultas a Wikidata no sentar c√°tedra sobre la ubicaci√≥n de las obras de Goya en el mundo.


Wikidata est√° genial pero ser√≠a de desear la colaboraci√≥n de organismos/fundaciones como la Fundaci√≥n Goya en Arag√≥n para que ayudar√° a hacer que el catalog√≥ de obras de Goya en Wikidata fuese m√°s completo y preciso. Ojala!!!





## Collage de obras de Goya

Me queda hacer el collage, ser√° para otro d√≠a ....


Lo que s√≠ voy a hacer es una tabla con links a las imagenes de las obras de Goya que hay en Wikidata. No todas las obras de Goya tienen una imagen en Wikidata, pero s√≠ muchas de ellas, concretamente 482. Ah√≠ van:  

```{r}
#| include: false
df_con_img <- df_ubicaciones %>% 
  filter(!is.na(image)) %>% 
  distinct(item, .keep_all = TRUE) %>% 
  select(itemLabel, ubicacionLabel, ciudadLabel , link_esp, link_eng, image, idGoya,  item)
```


```{r}
DT::datatable(df_con_img,
              caption = 'Cuadro 4: Imag√©n y links a las obras de Goya en Wikidata',
              filter = 'top', options = list(pagegeLength = 5, autoWidth = TRUE),
              class = 'cell-border stripe',
              colnames = c( 'Cuadro', "Museo","Ciudad", "Imag√©n en Wikidata", " Link a Wikipedia" , "Link a Wiki inglesa", 'id, "Link a Wikidata"'))
```


<br>


```{r}
DT::datatable(df_con_img)
```


## Conclusiones

Simplemente repetir lo que he dicho m√°s arriba: que cada cual saque sus propias impresiones y conclusiones ... y si alg√∫n experto en Goya lee el post, que no sea muy duro conmigo: recuerda que son datos de Wikidata^[Repito, Wikidata es super-fant√°stica, pero evidentemente tiene lagunas y algunos errores] y que el objetivo del post es aprender/recordar a hacer consultas a Wikidata no sentar c√°tedra sobre la ubicaci√≥n de las obras de Goya en el mundo.


Wikidata es fabulosa, pero ser√≠a de desear la colaboraci√≥n de organismos/fundaciones como la Fundaci√≥n Goya en Arag√≥n para que ayudar√°n a hacer que el cat√°logo de obras de Goya en Wikidata fuese m√°s completo y preciso. Ojala!!!


