[
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Pedro J. P√©rez",
    "section": "",
    "text": "Mi nombre es Pedro J. P√©rez. Soy profesor del departamento de An√°lisis Econ√≥mico de la Universitat de Val√®ncia. Mi p√°gina web en la UV es: https://www.uv.es/pjperez/\nMe gusta aprender y trastear con R; vamos, que a√∫n soy un entusiasta de R. Me divierto!!\nA pesar de haber tenido ya unos cuantos blogs, no soy bloguero, mas bien soy un creador y liquidador de blogs. Aqu√≠, puedes ver un listado no exhaustivo de los blogs que he liquidado.\nLa verdad es que me gusta escribir posts, tienes mucha m√°s libertad que al escribir un informe o un art√≠culo acad√©mico; adem√°s, los posts no tienen porque estar perfectos, cuando te apetece los puedes dejar; adem√°s, aunque los posts no est√©n acabados del todo, el pensar que alguien puede leerlos te hace pensar y reflexionar sobre lo que escribes.\n\nRemember kids, the only difference between screwing around and science is writing it down ‚Äî Adam Savage de MythBusters"
  },
  {
    "objectID": "blog_Rflowers.html",
    "href": "blog_Rflowers.html",
    "title": "R & flowers (2024)",
    "section": "",
    "text": "Ordenar por\n       Pre-seleccionado\n         \n          T√≠tulo\n        \n         \n          Fecha - Menos reciente\n        \n         \n          Fecha - M√°s reciente\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\n\n\n\n\n\n¬øExiste sesgo de g√©nero en los premios literarios?\n\n\nSe analiza la presencia y posibles pautas del sesgo de g√©nero en los premios literarios usando R y datos de Wikidata \n\n\n\npremios literarios\n\n\nWikidata\n\n\n\n\n\n\n22 ene 2024\n\n\n4 minutos\n\n\n\n\n\n\n\n\n\n\n\n\nPremios literarios: obtenci√≥n de los datos\n\n\nSe describe (un poco) el proceso de obtenci√≥n de datos referentes a premios literarios en Wikidata \n\n\n\npremios literarios\n\n\nWikidata\n\n\n\n\n\n\n10 jul 2023\n\n\n3 minutos\n\n\n\n\n\n\n\n\n\n\n\n\nAtlethic World Record‚Äôs: obtenci√≥n de los datos y algunas curiosidades\n\n\nEn el post se describe (un poco) el proceso de obtenci√≥n de los datos referentes a los r√©cords mundiales de atletismo de la p√°gina web de la IAAF. Con los datos obtenidos se presentan algunas curiosidades referentes a los r√©cords mundiales \n\n\n\nWR atletismo\n\n\nweb scraping\n\n\n\n\n\n\n10 jul 2023\n\n\n3 minutos\n\n\n\n\n\n\n\n\n\n\n\n\nMunicipios espa√±oles m√°s poblados (1842-2021)\n\n\nUtilizando datos de los censos hist√≥ricos y del Padr√≥n se presentan visualizaciones con el el ranking de ciudades espa√±olas m√°s pobladas desde el censo de 1842 hasta la actualidad. \n\n\n\ndatos INE\n\n\nCensos hist√≥ricos\n\n\npoblaci√≥n\n\n\nmunicipios\n\n\nranking de poblaci√≥n\n\n\n\n\n\n\n14 jul 2022\n\n\n4 minutos\n\n\n\n\n\n\n\n\n\n\n\n\nEvoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)\n\n\nUtilizando datos de los censos hist√≥ricos y del Padr√≥n se realizan visualizaciones de la evoluci√≥n del n√∫mero de municipios espa√±oles en el tiempo, desde el censo de 1842 hasta la actualidad. \n\n\n\ndatos INE\n\n\nCensos hist√≥ricos\n\n\nmunicipios\n\n\nn√∫mero de municipios\n\n\n\n\n\n\n13 jul 2022\n\n\n6 minutos\n\n\n\n\n\n\n\n\n\n\n\n\nCensos hist√≥ricos (1842-2011): obtenci√≥n de los datos\n\n\n\n\n\n\ndatos INE\n\n\nCensos hist√≥ricos\n\n\npoblaci√≥n\n\n\nmunicipios\n\n\nweb scraping\n\n\n\n\n\n\n12 jul 2022\n\n\n10 minutos\n\n\n\n\n\n\nNo hay resultados"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "My last blog's (2024-9999)",
    "section": "",
    "text": "Bienvenidos a mi nueva web con (I hope) mis √∫ltimos 2 blogs:\n\n\nR & flowers (2024) : es un blog para registrar algunos an√°lisis que hago pero que, si no los escribo para el blog, se acaban perdiendo.\n\n\n\nTBits: es un blog para escribir peque√±as p√≠ldoras/post para mis cursos\n\n\nAnd ‚Ä¶\n\nRemember kids, the only difference between screwing around and science is writing it down ‚Äî Adam Savage de MythBusters"
  },
  {
    "objectID": "blog_Rflowers/2024-01-22_premios-literarios_02/index.html",
    "href": "blog_Rflowers/2024-01-22_premios-literarios_02/index.html",
    "title": "¬øExiste sesgo de g√©nero en los premios literarios?",
    "section": "",
    "text": "El objetivo del post es analizar, utilizando datos de Wikidata, la existencia y pautas del posible sesgo de genero en los premios literarios.\nEn el post anterior habl√© (un poco) de c√≥mo obtuve los datos y que los resultados que obtuve fueron presentados en las XIII Jornadas de usuarios de R en noviembre de 2023.\nLa versi√≥n final de las slides que utilic√© para hacer la presentaci√≥n en las Jornadas pueden verse aqu√≠ o en el iframe de m√°s abajo.\nAqu√≠ simplemente me apoyar√© en las slides para mostrar algunos de los principales resultados. Mucho mejor ver las slides!! üòâ"
  },
  {
    "objectID": "blog_Rflowers/2024-01-22_premios-literarios_02/index.html#footnotes",
    "href": "blog_Rflowers/2024-01-22_premios-literarios_02/index.html#footnotes",
    "title": "¬øExiste sesgo de g√©nero en los premios literarios?",
    "section": "Notas",
    "text": "Notas\n\n\n‚Ä¶ premios m√°s tochos üòâ‚Ü©Ô∏é"
  },
  {
    "objectID": "blog_Rflowers/2023-07-10_WR_01/index.html",
    "href": "blog_Rflowers/2023-07-10_WR_01/index.html",
    "title": "Atlethic World Record‚Äôs: obtenci√≥n de los datos y algunas curiosidades",
    "section": "",
    "text": "Seg√∫n cuenta la Wikipedia aqu√≠, las plusmarcas del mundo de atletismo, o r√©cords mundiales de atletismo, son ratificadas por World Athletics1 desde 1912. Aqu√≠ nos cuentan que la primera lista de r√©cords mundiales masculinos se public√≥ por primera vez en 1914 y las primeras listas de mujeres en 1936 . Desde 1987, la IAAF estableci√≥ una lista de r√©cords mundiales en pista cubierta, aunque desde el 1 de enero de 2000, La regla 260.18a de la IAAF se modific√≥ para que ahora se puedan establecer r√©cords mundiales en un estadio deportivo con o sin techo."
  },
  {
    "objectID": "blog_Rflowers/2023-07-10_WR_01/index.html#intro",
    "href": "blog_Rflowers/2023-07-10_WR_01/index.html#intro",
    "title": "Atlethic World Record‚Äôs: obtenci√≥n de los datos y algunas curiosidades",
    "section": "",
    "text": "Seg√∫n cuenta la Wikipedia aqu√≠, las plusmarcas del mundo de atletismo, o r√©cords mundiales de atletismo, son ratificadas por World Athletics1 desde 1912. Aqu√≠ nos cuentan que la primera lista de r√©cords mundiales masculinos se public√≥ por primera vez en 1914 y las primeras listas de mujeres en 1936 . Desde 1987, la IAAF estableci√≥ una lista de r√©cords mundiales en pista cubierta, aunque desde el 1 de enero de 2000, La regla 260.18a de la IAAF se modific√≥ para que ahora se puedan establecer r√©cords mundiales en un estadio deportivo con o sin techo."
  },
  {
    "objectID": "blog_Rflowers/2023-07-10_WR_01/index.html#obtenci√≥n-de-los-datos",
    "href": "blog_Rflowers/2023-07-10_WR_01/index.html#obtenci√≥n-de-los-datos",
    "title": "Atlethic World Record‚Äôs: obtenci√≥n de los datos y algunas curiosidades",
    "section": "\n2 Obtenci√≥n de los datos",
    "text": "2 Obtenci√≥n de los datos\nLos datos se obtuvieron de la p√°gina web de World Athletics. Concretamente la p√°gina de acceso a los r√©cords est√° aqu√≠. En esta p√°gina se pueden acceder a 53 categor√≠as de WR para mujeres y 46 para los hombres2.\nDescart√© las pruebas de relevos, las pruebas combinadas (heptalon, decathlon) y pruebas digamos ‚Äúextra√±as‚Äù, como por ejemplo, 1.000 metros, 2.000 metros, 50 kil√≥metros , etc ‚Ä¶ Adem√°s como en futuros post quiero hacer una comparativa de rendimineto entre hombres y muyjeres, descart√© las carreras de 100 y 110 metros vallas. Finalmente me qued√© con las siguientes pruebas:\n\nC√≥digolibrary(tidyverse)\ndf_2022 &lt;- pjpv.datos.2022::IAAF_WR_2022\ndf &lt;- df_2022 %&gt;% \n  filter(!(prueba.f.9 %in% c(\"Relevos\", \"Combinadas\",  \"Race-walk\",  \"Carreras (raras)\" ))) %&gt;% \n  filter(!prueba.f %in% c(\"1000-metres\", \"2000-metres\",\"one-mile\", \"3000-metres\", \"half-marathon\", \"5-kilometres\", \"10-kilometres\", \"50-kilometres\" ,\"100-kilometres\"))\ntable &lt;- df %&gt;% \n  distinct( prueba, prueba.f.9) %&gt;% \n  mutate(prueba.f.9 = as.character(prueba.f.9)) %&gt;% \n  mutate(prueba.f.9 = ifelse(!(prueba.f.9 %in% c(\"Saltos\", \"Lanzamientos\")) , \"Carreras\",  prueba.f.9  )) %&gt;% \n  arrange(prueba) %&gt;% \n  group_by(prueba.f.9) %&gt;% \n  summarise(from_country = paste(prueba, collapse = \", \")) \ngt::gt(table)\n\n\n\n\n\n\nprueba.f.9\nfrom_country\n\n\n\nCarreras\n100-metres, 100-metres-hurdles, 10000-metres, 110-metres-hurdles, 1500-metres, 200-metres, 3000-metres-steeplechase, 400-metres, 400-metres-hurdles, 5000-metres, 800-metres, marathon\n\n\nLanzamientos\ndiscus-throw, hammer-throw, javelin-throw, shot-put\n\n\nSaltos\nhigh-jump, long-jump, pole-vault, triple-jump"
  },
  {
    "objectID": "blog_Rflowers/2023-07-10_WR_01/index.html#an√°lisis",
    "href": "blog_Rflowers/2023-07-10_WR_01/index.html#an√°lisis",
    "title": "Atlethic World Record‚Äôs: obtenci√≥n de los datos y algunas curiosidades",
    "section": "\n3 An√°lisis",
    "text": "3 An√°lisis\nVeremos cuando tengo tiempo para jugar un poco con los datos."
  },
  {
    "objectID": "blog_Rflowers/2023-07-10_WR_01/index.html#footnotes",
    "href": "blog_Rflowers/2023-07-10_WR_01/index.html#footnotes",
    "title": "Atlethic World Record‚Äôs: obtenci√≥n de los datos y algunas curiosidades",
    "section": "Notas",
    "text": "Notas\n\nantes Asociaci√≥n Internacional de Federaciones de Atletismo (IAAF)‚Ü©Ô∏é\nHay m√°s categor√≠as en las mujeres, entre otras razones porque en ciertas pruebas como el marat√≥n hay WR para carreras mixtas y carreras donde solo participan mujeres‚Ü©Ô∏é"
  },
  {
    "objectID": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html",
    "href": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "",
    "text": "Se describe el proceso de obtenci√≥n y procesado de los datos de los censos hist√≥ricos de poblaci√≥n en Espa√±a (1842-2011) que ofrece el INE."
  },
  {
    "objectID": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html#introducci√≥n",
    "href": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html#introducci√≥n",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "1 Introducci√≥n",
    "text": "1 Introducci√≥n\nA todos nos gusta saber cuantos habitantes tiene nuestro pueblo; y como nos dice el conde Draco esto se hace en los censos. Un censo de poblaci√≥n es una operaci√≥n estad√≠stica cuyo principal objetivo es hacer un recuento de la poblaci√≥n, as√≠ como de sus principales caracter√≠sticas sociales y demogr√°ficas. En este post describo el proceso que tuve que hacer para obtener y procesar los datos de los censos hist√≥ricos de poblaci√≥n en Espa√±a que ofrece el INE en su web. En posteriores posts se supone que los usar√© para hacer algunas visualizaciones y an√°lisis, como por ejemplo, la evoluci√≥n del ranking de capitales de provincia m√°s pobladas o la evoluci√≥n de la importancia (en t√©rminos de poblaci√≥n) de las capitales provinciales en su propia provincia; adem√°s, seguro que utilizo estos datos en mi curso de introducci√≥n a R en la UV. Son datos chulos y no exigen mucha carga mental para analizarlos.\n\n\nObjetivo: Obtener los datos de los censos hist√≥ricos (1842-2011) ofrecidos por el INE."
  },
  {
    "objectID": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html#obtenci√≥n-de-los-datos-web-scraping",
    "href": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html#obtenci√≥n-de-los-datos-web-scraping",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "2 Obtenci√≥n de los datos (Web scraping)",
    "text": "2 Obtenci√≥n de los datos (Web scraping)\nEl INE ofrece aqu√≠ acceso a los censos realizados en Espa√±a durante el periodo 1857-19701. El acceso es a trav√©s de documentos pdf, de forma que, para poder recopilar los datos all√≠ contenidos se tendr√≠an que procesar a mano (no way!!) o por tecnolog√≠as OCR (hay que saber mucho y ser un poco orfebre!!)2; as√≠ que me olvid√© de los pdf‚Äôs y me fui al segundo punto de acceso a los datos, concretamente aqu√≠ para obtener los datos por Web scraping. En este segundo punto de acceso se ofrecen datos de los censos para el periodo 1842-2011.3\n\n\nObtendremos los datos mediante web scraping\nEsta segunda forma de obtener los datos, por Web scraping, tampoco es que sea extremadamente f√°cil ya que el INE, ofrece un buscador en el que puedes hacer consultas para un s√≥lo municipio (o provincia), de forma que, habr√≠a que hacer cerca de 12.000 consultas a mano para descargarse los datos de poblaci√≥n de todos los municipios espa√±oles que han existido desde 1842. Factible, pero mejor si se hacen las peticiones de datos mediante un proceso automatizado y descargas los datos mediante Web scraping. De esta forma se recogen los datos en menos de una hora.\nSer√≠a as√≠ de f√°cil si el INE ofreciese un listado de c√≥digos para los municipios que han existido a lo largo de la historia en Espa√±a para as√≠ poder hacer las consultas, pero esto no es as√≠. El INE ofrece un listado de c√≥digos municipales aqu√≠ pero s√≥lo para los municipios ‚Äúactuales‚Äù, as√≠ que el proceso para obtener los datos tuvo varias etapas:\n\n\nEl proceso de scraping tuvo varias etapas\n\nDe los datos de la revisi√≥n del padr√≥n municipal extraje los c√≥digos de los municipios que han existido en Espa√±a en el periodo 1996 y 1998-2021: un total de 8.120 c√≥digos municipales. Con estos c√≥digos hice peticiones a la web del INE para generar las tablas con sus datos y poder hacer Web scraping para extraer los datos de poblaci√≥n de los censos hist√≥ricos de esos 8.120 municipios.\nEn las tablas de cada municipio, adem√°s de los datos de poblaci√≥n4, se ofrece una serie de notas con informaci√≥n sobre fen√≥menos como el cambio de nombre de los municipios y sus alteraciones municipales5. Al procesar estas anotaciones, buscando conjuntos de d√≠gitos de 5 o 6 d√≠gitos, se consiguieron recuperar 2.924 c√≥digos municipales adicionales. Son c√≥digos que no aparecen en los datos del Padr√≥n porque estos municipios se extinguieron antes de 1998.\nCon los c√≥digos de estos 2.924 ‚Äúnuevos‚Äù municipios se hicieron nuevas peticiones al INE, de las cuales surgieron nuevas notas de alteraciones municipales, que a su vez proporcionaron nuevos c√≥digos municipales.\nSe tuvo que repetir este proceso 5 veces hasta que de las notas de la √∫ltima vuelta no surgieron nuevos c√≥digos municipales. En total hab√≠a escrapeado un total de 11.882 municipios: 8.120 en la primera vuelta, 2.924 en la segunda, 767, 69, y finalmente 2 nuevos municipios en la quinta y √∫ltima ronda.\n\nParec√≠a que todo estaba bien, que hab√≠a conseguido localizar todos los municipios existentes en la web del INE, pero ‚Ä¶ no me fiaba ya que del procesado de texto siempre suele haber errores, as√≠ que gracias a que conozco a Francisco J. Goerlich, seguramente la persona que m√°s sabe de estos temas6, consegu√≠ detectar que me faltaban a√∫n 28 municipios por encontrar. El fallo no fue causado por mi proceso de scraping sino por ‚Äúfallos‚Äù en las anotaciones en las tablas del INE.\n\n\nTras las 5 vueltas del scraping se recopilaron datos de 11.882 c√≥digos municipales ‚Ä¶\nDe los 28 municipios que el scraping no detect√≥, en 4 de ellos el motivo fue que hab√≠a fallos7 en las notas que hubieran permitido detectarlos. En los restantes 24 municipios que no se detectaron, la raz√≥n fue similar: son municipios que solo aparecen en el primer censo que registra el INE, el de 1842, y en su nota al pie solo pone algo como ‚ÄúEste municipio que aparece en el Censo de 1842, ‚Ä¶, no se le localiza en el Censo de 1857‚Äù, pero no dice si se integraron en otro municipio o se volatilizaron, de forma que era imposible detectarlos mediante el proceso de Web scraping.\n\n\n‚Ä¶ pero a√∫n faltaban 28 municipios.\nTras este proceso, ten√≠a los datos de los 11.910 municipios que han existido en Espa√±a, a juzgar por la informaci√≥n que aparece en los censos hist√≥ricos del INE 1842-20118.\n\n\nAl final se obtuvieron datos de 11.910 municipios."
  },
  {
    "objectID": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html#qu√©-variables-hay-en-los-datos",
    "href": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html#qu√©-variables-hay-en-los-datos",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "3 ¬øQu√© variables hay en los datos?",
    "text": "3 ¬øQu√© variables hay en los datos?\nLos datos del INE contienen, tal y como se explica aqu√≠, una tabla para cada uno de los municipios que han sido censados en Espa√±a desde 1842. Para cada municipio se recogen 3 variables: poblaci√≥n de hecho, poblaci√≥n de derecho y n√∫mero de hogares. Adem√°s se recogen, en las notas al pie de la tabla, determinadas alteraciones municipales. Como ejemplo, aqu√≠ puedes ver la tabla para Pancrudo que, como se aprecia en las notas, incorpor√≥ a Portalrubio en el censo de 1981.\n\n\n3 variables: hogares, poblaci√≥n de hecho y poblaci√≥n de derecho.\nEn la tabla se aprecia que hay dos variables de poblaci√≥n: la de hecho y la de derecho. Para mis an√°lisis utilizar√© la poblaci√≥n de derecho, salvo en los censos de 1857 y 1860 en los que como no hay registro para la poblaci√≥n de derecho, la sustituir√© por la de hecho, para as√≠ tener una serie completa de poblaci√≥n para todos los censos del periodo 1842-2011. Es posible que en algunos an√°lisis a√±ada tambi√©n los datos del Padr√≥n (1998-2021).\n\n\nUsare la poblaci√≥n de derecho, salvo cuando esta no est√© disponible."
  },
  {
    "objectID": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html#cifras-oficiales-de-poblaci√≥n",
    "href": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html#cifras-oficiales-de-poblaci√≥n",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "4 ¬øCifras oficiales de poblaci√≥n?",
    "text": "4 ¬øCifras oficiales de poblaci√≥n?\nVoy a utilizar estos datos para hacer algunos an√°lisis y visualizaciones, as√≠ que cabe preguntarse si son datos ‚Äúoficiales‚Äù de poblaci√≥n y si est√°n libres de errores. En principio los datos que he obtenido por web scraping de la web del INE deber√≠an ser las ‚Äúcifras oficiales‚Äù de poblaci√≥n de los municipios espa√±oles, pero en Goerlich y otros (2015) se√±alan, concretamente en los apartados 2.2.6, 2.2.7 y 2.2.8, diversos errores de transcripci√≥n9.\n\n\nGoerlich y otros (2015) detectaron errores de transcripci√≥n.\nSin embargo, esos errores detectados pr√°cticamente no afectan a los an√°lisis y visualizaciones que har√© en el blog. En concreto, los errores detectados que afectan a las capitales de provincia son menores, solo detect√°ndose diferencias importantes en Ceuta, Melilla y Madrid en el censo de 199110, as√≠ que para los an√°lisis que voy a hacer en el blog doy por buenos los datos que figuran aqu√≠ en la web del INE.\n\n\nEsos errores afectar√≠an m√≠nimamente a los resultados mostrados en el blog.\nMi objetivo no es hacer un art√≠culo cient√≠fico, sino tan solo, hacer algunos an√°lisis y visualizaciones que describan, a grandes rasgos, la evoluci√≥n hist√≥rica de la poblaci√≥n municipal en Espa√±a, para usarlos en mis clases, as√≠ que yo los voy a dar por buenos.\nTampoco voy a tratar de corregir la poblaci√≥n por las alteraciones municipales que hayan ocurrido; es decir no trato de obtener series homog√©neas de poblaci√≥n, entre otras cosas porque ya lo ha hecho Paco Goerlich!!\nSupongo que un historiador podr√° decir mucho sobre la validez, cambios de criterios y dem√°s infortunios acaecidos a lo largo de los distintos censos. Yo aqu√≠ voy a dar por buenos los datos: son del INE!! üòá\nBueno pues ya he dejado medio descrito el proceso de obtenci√≥n de los datos as√≠ que cierro el post: ya los usar√© en futuros post."
  },
  {
    "objectID": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html#qu√©-voy-a-hacer-con-los-datos",
    "href": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html#qu√©-voy-a-hacer-con-los-datos",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "5 ¬øQu√© voy a hacer con los datos?",
    "text": "5 ¬øQu√© voy a hacer con los datos?\nLa verdad es que los datos cuesta un poquito acceder a ellos, menos mal que ven√≠a de un proyecto en el que hab√≠a escrapeado los resultados de atletismo de la IAAF, que despu√©s me hab√≠a llevado a escrapear datos de premios literarios, vamos que estaba entrenado en scraping y en una tarde lo ten√≠a (casi) hecho, pero ‚Ä¶ y ‚Ä¶ y al final ten√≠a los datos!!! üòÄ Demasiado jaleo para lo que voy a hacer11 pero, ‚Ä¶\nOK, vale, pero ¬øqu√© vas a hacer? Pues a√∫n no lo s√© del todo, pero seguro que juego con ellos para satisfacer mi curiosidad y preparar posibles ejercicios para el pr√≥ximo curso.\n\n\nVeremos que hago con estos datos ‚Ä¶"
  },
  {
    "objectID": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html#referencias",
    "href": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html#referencias",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "6 Referencias",
    "text": "6 Referencias\n(Algunos art√≠culos que hablan de la evoluci√≥n hist√≥rica de la poblaci√≥n y/o de los censos hist√≥ricos)\n\n\nAlbet i Mas, Abel. 1970. ¬´El mapa municipal en Espa√±a: estructura, evoluci√≥n y problem√°ticas¬ª. Geopol√≠tica(s). Revista de estudios sobre espacio y poder 10 (1): 11-40. https://doi.org/10.5209/GEOP.63834.\n\n\nPa√≠s, Ediciones El. 2021. ¬´As√≠ ha cambiado Espa√±a desde los primeros censos del siglo XVIII¬ª. Verne. https://verne.elpais.com/verne/2021/03/01/articulo/1614584363_382946.html.\n\n\nPrieto, Gonzalo. 2016. ¬´La evoluci√≥n de Madrid a lo largo de la historia¬ª. Geograf√≠a Infinita. https://www.geografiainfinita.com/2016/01/historia-del-plano-de-madrid/."
  },
  {
    "objectID": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html#footnotes",
    "href": "blog_Rflowers/2022-07-12_censos-historicos_01/index.html#footnotes",
    "title": "Censos hist√≥ricos (1842-2011): obtenci√≥n de los datos",
    "section": "Notas",
    "text": "Notas\n\n\nEn esta publicaci√≥n del INE puede encontrase una peque√±a rese√±a de los principales censos hist√≥ricos hechos en Espa√±a‚Ü©Ô∏é\nLa verdad es que prob√© los paquetes tesseract y tabulizer y no lo hac√≠an mal, pero hac√≠a falta mucho m√°s trabajo para llegar a algo medio decente. Intent√© probar el paquete daiR que da acceso a la Google Cloud Document AI API, que se supone que es la ca√±a para extraer texto y tablas de pdf‚Äôs, PERO es un servicio de pago. No parec√≠a muy caro, pero no lo prob√©.‚Ü©Ô∏é\nPara censos anteriores puede verse esta publicaci√≥n del INE‚Ü©Ô∏é\nConcretamente se ofrece la poblaci√≥n de derecho, la poblaci√≥n de hecho y el n√∫mero de hogares.‚Ü©Ô∏é\nPor ejemplo si son absorbidos por otro municipio; como por ejemplo Vallecas, que exist√≠a como municipio independiente en el censo de 1940 pero pas√≥ a estar integrado en el municipio de Madrid en el censo de 1950.‚Ü©Ô∏é\nY de muchos otros (temas) üôÇ.‚Ü©Ô∏é\nLos 4 municipios son San Quirce de Riopisuerga (09342), G√°tova (12066), Rivas de Tereso (26504) y Los Hueros (28511). El fallo consisti√≥ en que su c√≥digo municipal estaba incompleto en la nota que hubiese permitido detectarlos; concretamente su c√≥digo municipal solo ten√≠a 3 d√≠gitos en lugar de los 5 habituales.‚Ü©Ô∏é\nSe√±alar que existen casos digamos ‚Äúextra√±os‚Äù, como por ejemplo el municipio de Gatova que cambi√≥ su c√≥digo de 12066 a 46092 al incorporarse a la provincia de Valencia, desde la de Castell√≥n, en el censo de 2001. ¬øSon municipios diferentes? Bueno, podemos pensar que s√≠, ya que tienen c√≥digos municipales diferentes.‚Ü©Ô∏é\nEsos errores de transcripci√≥n se describen en detalle en los apartados 2.2.6, 2.2.7 y 2.2.8 de este libro‚Ü©Ô∏é\nComo ejemplo, se√±alar que, en el caso de Madrid, la poblaci√≥n que figura en la web del INE para el censo de 1991 es de 2.909.792, mientras que en el Censo original es de 3.010.492. Este error supone un 3,46%.‚Ü©Ô∏é\nAdem√°s, seguro que lo que haga ya estar√° hecho seguramente en este libro. Tiene 354 p√°ginas!!!! No voy a mirar mucho por si acaso!!‚Ü©Ô∏é"
  },
  {
    "objectID": "blog_TBits/002_geolocalizacion.html",
    "href": "blog_TBits/002_geolocalizacion.html",
    "title": "Geolocalizaci√≥n con R",
    "section": "",
    "text": "Seg√∫n la Wikipedia, la geolocalizaci√≥n es el proceso de determinar la ubicaci√≥n o la posici√≥n geogr√°fica de un objeto en la superficie terrestre. Es decir:\n\nLa geocodificaci√≥n consite en, partiendo de una direcci√≥n o del nombre de un lugar, obtener sus coordenadas.\n\nPor su parte, la geocodificaci√≥n inversa realiza la tarea opuesta: partiendo de unas coordenadas, obtener una direcci√≥n direcci√≥n f√≠sica o un top√≥nimo. Este proceso permite la identificaci√≥n de direcciones postales, lugares o subdivisiones territoriales tales como parajes, barrios, c√≥digos postales, municipios, provincias o pa√≠s a partir de un par de coordenadas .\nEn nuestro caso, la geolocalizaci√≥n consistir√° en obtener la latitud y longitud de una direcci√≥n postal. Por supuesto lo haremos con R. Es un ejercicio que suelo hacer en clase: antes de que se inicien las clases, pido a los matriculados que contesten a un cuestionario. All√≠ les pido, entre otras cuestiones, que me indiquen su lugar de nacimiento: pa√≠s y municipio. Obviamente usamos estos datos en clase para geolocalizar el lugar de nacimiento de los estudiantes."
  },
  {
    "objectID": "blog_TBits/002_geolocalizacion.html#intro-geo-qu√©",
    "href": "blog_TBits/002_geolocalizacion.html#intro-geo-qu√©",
    "title": "Geolocalizaci√≥n con R",
    "section": "",
    "text": "Seg√∫n la Wikipedia, la geolocalizaci√≥n es el proceso de determinar la ubicaci√≥n o la posici√≥n geogr√°fica de un objeto en la superficie terrestre. Es decir:\n\nLa geocodificaci√≥n consite en, partiendo de una direcci√≥n o del nombre de un lugar, obtener sus coordenadas.\n\nPor su parte, la geocodificaci√≥n inversa realiza la tarea opuesta: partiendo de unas coordenadas, obtener una direcci√≥n direcci√≥n f√≠sica o un top√≥nimo. Este proceso permite la identificaci√≥n de direcciones postales, lugares o subdivisiones territoriales tales como parajes, barrios, c√≥digos postales, municipios, provincias o pa√≠s a partir de un par de coordenadas .\nEn nuestro caso, la geolocalizaci√≥n consistir√° en obtener la latitud y longitud de una direcci√≥n postal. Por supuesto lo haremos con R. Es un ejercicio que suelo hacer en clase: antes de que se inicien las clases, pido a los matriculados que contesten a un cuestionario. All√≠ les pido, entre otras cuestiones, que me indiquen su lugar de nacimiento: pa√≠s y municipio. Obviamente usamos estos datos en clase para geolocalizar el lugar de nacimiento de los estudiantes."
  },
  {
    "objectID": "blog_TBits/002_geolocalizacion.html#ejemplo",
    "href": "blog_TBits/002_geolocalizacion.html#ejemplo",
    "title": "Geolocalizaci√≥n con R",
    "section": "\n2 Ejemplo",
    "text": "2 Ejemplo\nVamos a usar estos datos de ejemplo. Como ves es un archivo Ggoogle Sheets. Los datos ya est√°n casi arreglados del todo. Los arregl√© as√≠:\n\nC√≥digolibrary(tidyverse)\nlibrary(googlesheets4)  \n\n#- obtener el sheet (hay que autorizar)\nlista_sheets &lt;- googlesheets4::gs4_find()  \nid_sheet &lt;- lista_sheets %&gt;% filter(name == \"Programaci√≥n y manejo de datos (2019-2020) (respuestas)\") %&gt;% pull(id)\nmy_sheet &lt;- googlesheets4::read_sheet(id_sheet)   \n\n#- arreglando (un poco) los datos\ndf &lt;- my_sheet %&gt;% \n  janitor::clean_names(df) %&gt;% \n  dplyr::select(1, 2, pregunta_9, pregunta_10) \n  \nnames(df) &lt;- c(\"year\", \"nombre\", \"lugar_nac\", \"cancion\")\n\ndf &lt;- df %&gt;% mutate(year = stringr::str_extract(year, \"^[0-9]{4}\"))\ndf &lt;- df %&gt;% tidyr::separate(lugar_nac, into = c(\"pais\", \"municipio\"), sep = \" - \") \ndf &lt;- df %&gt;% tidyr::separate(cancion, into = c(\"grupo\", \"cancion\", \"ruta\"), sep = \" - \") \ndf &lt;- df %&gt;% mutate(across(grupo:ruta, ~ str_remove(.x, \"(&lt;|&lt; )\")))\ndf &lt;- df %&gt;% mutate(across(grupo:ruta, ~ str_remove(.x, \"(&gt;| &gt;)\" )))\ndf &lt;- df %&gt;% mutate(across(pais:ruta, ~ str_squish(.x)))\n\n#- guardando en Google Drive\nmy_ss &lt;- googlesheets4::gs4_create(name = \"matriculados_BigData_blog\", sheets = \"respuestas\")\nwrite_sheet(df, ss = my_ss, sheet = \"respuestas\")\n\n\nLos datos arreglados, como hemos visto antes, los guard√© en un Google Sheet. Para leerlos en R, usamos el paquete gsheet. Adem√°s, vamos a quitar los NA‚Äôs con tidyr::drop_na().\n\nC√≥digolibrary(tidyverse)\nlibrary(sf)\n\ndf &lt;- gsheet::gsheet2tbl(\"https://docs.google.com/spreadsheets/d/1731na00Pck0mE0zx3k217wf6FntW2APTDXw2nliylB0/edit?usp=sharing\")  %&gt;% \n  tidyr::drop_na()\n\n\nF√≠jate que en df hay dos columnas con informaci√≥n sobre el lugar de nacimiento: pais y municipio. Con est√° informaci√≥n podemos geolocalizar el lugar de nacimiento de los matriculados. Para ello, vamos a usar el paquete tidygeocoder que internamente hace uso de Nominatim, un servicio de geolocalizaci√≥n de c√≥digo abierto asociado a OpenStreetMap. Concretamente, para geolocalizar, usaremos la funci√≥n tidygeocoder::geocode().\n\nC√≥digodf_geocoded &lt;- df %&gt;% \n  tidygeocoder::geocode(city = municipio, country = pais, method = \"osm\")\n\n\nOtra forma de hacerlo, quiz√°s la m√°s com√∫n, es poner toda la informaci√≥n sobre, en este caso, el lugar de nacimiento, en una sola columna, que llamaremos text_to_geocode, que ser√° la que usaremos para geolocalizar. Ve√°moslo\n\nC√≥digodf_geocoded &lt;- df %&gt;% \n    dplyr::mutate(text_to_geocode = paste(municipio, pais, sep = \", \"), .after = municipio) %&gt;%\n    tidygeocoder::geocode(address = text_to_geocode, method = \"osm\")\n\n\nDe cualquiera de las 2 maneras tendr√≠amos en df_geocoded dos nuevas columnas llamadas long y lat que contienen la longitud y la latitud, del lugar de nacimiento de los matriculados. Ya tenemos la informaci√≥n geolocalizada!!!\nBueno , pues ya estar√≠a üòä ‚Ä¶ pero, ya que estamos, vamos a hacer un mapa para visualizar donde nacieron los matriculados a mi curso de R."
  },
  {
    "objectID": "blog_TBits/002_geolocalizacion.html#visualizaci√≥n",
    "href": "blog_TBits/002_geolocalizacion.html#visualizaci√≥n",
    "title": "Geolocalizaci√≥n con R",
    "section": "\n3 Visualizaci√≥n",
    "text": "3 Visualizaci√≥n\nAntes de hacer el mapa, hay que convertir la longitud y latitud en un objeto sf. Para ello:\n\nC√≥digodf_plot &lt;- df_geocoded %&gt;% \n  sf::st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326)\n\n\nUna vez hecho esto podemos usar distintas estrategias/paquetes para hacer el mapa:\n\nCon mapview\n\n\nC√≥digomapview::mapview(df_plot)\n\n\n\n\n\nPor supuesto el plot se puede mejorar (y mucho), pero para eso tendr√°s que ir a la documentaci√≥n de mapview.\n\nC√≥digomapview::mapview(df_plot, zcol = c(\"municipio\"))\n\n\n\n\n\n\nCon leaflet\n\nLa documentaci√≥n de leaflet est√° aqu√≠.\n\nC√≥digolibrary(leaflet)\nleaflet::leaflet(data = df_plot) %&gt;% \n  leaflet::addTiles() %&gt;%\n  leaflet::addMarkers(popup = ~ as.character(municipio), label = ~ as.character(municipio))\n\n\n\n\n\n\nCon ggplot2 y sf\n\nEste enfoque lo trabajamos bastante en clase. ya lo veremos, pero aqu√≠ voy a usar el c√≥digo de este post. Hace un gr√°fico muy-muy chulo. Tal como:\n\nC√≥digo# get world map outline (geometr√≠as de los pa√≠ses)\nworld_outline &lt;- spData::world |&gt; sf::st_as_sf()\n\n# let's use a fancy projection\nworld_outline_robinson &lt;- world_outline |&gt; \n    sf::st_transform(crs = \"ESRI:54030\")\n\ncountry_borders &lt;- world_outline_robinson |&gt; \n    rmapshaper::ms_innerlines()\n\n\nAhora ya podemos hacer el mapa.\n\nC√≥digoworld_outline_robinson |&gt; \n    filter(!iso_a2 == \"AQ\") |&gt; # get rid of Antarctica\n    ggplot()+\n    geom_sf(fill = \"#269999\", color = NA)+\n    geom_sf(data = country_borders, size = .25, color = \"#269999\" |&gt; prismatic::clr_lighten())+\n    geom_sf(\n        data = df_plot, fill = \"#dafa26\", \n        color = \"#dafa26\" |&gt; prismatic::clr_darken(),\n        size = 1.5, shape = 21\n    )+\n    coord_sf(datum = NA)+\n    theme_minimal(base_family = \"Atkinson Hyperlegible\")+\n    labs(\n        title = \"Lugar de nacimiento de los matriculados en curso Big Data\",\n        subtitle = \"Universitat de Val√®ncia. GECO, 2020-23\",\n        caption = \"Pedo J. P√©rez con super-ayuda de @ikashnitsky.phd\"\n    )+\n    theme(\n        text = element_text(color = \"#ccffff\"),\n        plot.background = element_rect(fill = \"#042222\", color = NA),\n        axis.text = element_blank(),\n        plot.title = element_text(face = 2, size = 13, color = \"#ccffff\")\n    )\n\n\n\n\n\n\n\n\nCon tmap\n\nPor √∫ltimo, vamos a hacer el mapa con tmap. La documentaci√≥n est√° aqu√≠.\n\nC√≥digolibrary(tmap)\ntm_shape(world_outline_robinson) +\n  tm_polygons('#f0f0f0f0', border.alpha = 0.2) +\ntm_shape(df_plot) +\n  tm_bubbles(size = 0.05)\n\n\n\n\n\n\n\nRecordar que los mapas se pueden mejorar mucho. Lo veremos, al menos un poco, en clase"
  },
  {
    "objectID": "blog_TBits/002_geolocalizacion.html#otro-ejemplo",
    "href": "blog_TBits/002_geolocalizacion.html#otro-ejemplo",
    "title": "Geolocalizaci√≥n con R",
    "section": "\n4 Otro ejemplo",
    "text": "4 Otro ejemplo\nEn el curso de R para profes sol√≠a hacer este otro ejemplo: gelocalizar el centro que ofrece el curso, el SFPIE. Era algo como:\n\nC√≥digo#- creo un df con la informaci√≥n postal del SFPIE\ndf &lt;- data.frame(adress = \"Facultad de Econom√≠a\", \n                 street = \"Avinguda dels tarongers\", \n                 city = \"Valencia\", \n                 postalcode = \"46022\",\n                 country = \"Spain\")\n\ndf &lt;- df %&gt;% mutate(text_to_geocode = paste( street, city, country, sep = \", \"))\n\n#- geolocalizamos con el pkg tidygeocoder \ndf &lt;- df %&gt;% tidygeocoder::geocode(text_to_geocode, method = \"osm\")\n# df &lt;- df %&gt;% tidygeocoder::geocode(street = street, city = city, postalcode = postalcode, country = country, method = \"osm\")\n\n\n\nUna vez hecha la geolocalizaci√≥n vamos a visualizar el lugar en un mapa. Para ello, vamos a usar leaflet.\n\nmap &lt;- leaflet::leaflet() %&gt;%\n       leaflet::addTiles() %&gt;% \n       leaflet::setView(lng = df$long, lat = df$lat, zoom = 16) \nmap\n\n\n\n\n\n\nVamos a poner un marcador en el mapa para que se vea mejor el lugar exacto donde est√° el SFPIE.\n\nmap &lt;- map %&gt;% \n       addMarkers(lng = df$long, lat = df$lat, popup = \"Facultat\") %&gt;% \n       addPopups(lng = df$long, lat = df$lat, popup = \"Facultat\") \nmap\n\n\n\n\n\n\nCon leaflet se pueden hacer muchas mas cosas; ejemplos aqu√≠. Por ejmeplo, vamos a hacer que si pinchas en el marker, se vea una imagen\n\nlibrary(leafpop)\nimg &lt;-  \"https://www.uv.es/recursos/fatwirepub/ccurl/12/318/P01.jpg\"\n\nmap2 &lt;- leaflet::leaflet() %&gt;%\n       leaflet::addTiles() %&gt;% \n       leaflet::setView(lng = df$long, lat = df$lat, zoom = 16) %&gt;% \n  addCircleMarkers(lng = df$long, lat = df$lat, group = \"pnt\") %&gt;%\n  addPopupImages(img, group = \"pnt\")\n\nmap2\n\n\n\n\n\n\nOtro posibilidad es usar diferentes ‚Äúproviders‚Äù. Infoprmaci√≥n aqu√≠\n\n#- hay muchos \"providers\": http://leaflet-extras.github.io/leaflet-providers/preview/\n#- por ejemplo:\n# map2 %&gt;% addProviderTiles(providers$Stamen.Toner)\n# map2 %&gt;% addProviderTiles(providers$Stamen.Terrain)\n# map2 %&gt;% addProviderTiles(providers$Esri.NatGeoWorldMap)\n\nmap2 %&gt;% addProviderTiles(providers$MtbMap) #- con carril bici"
  },
  {
    "objectID": "blog_TBits/002_geolocalizacion.html#algunos-detalles",
    "href": "blog_TBits/002_geolocalizacion.html#algunos-detalles",
    "title": "Geolocalizaci√≥n con R",
    "section": "\n5 Algunos detalles",
    "text": "5 Algunos detalles\nPara geolocalizar he usado 2 paquetes: primero us√© ggmap, pero se volvi√≥ un servicio de pago, as√≠ que cambi√© a tidygeocoder.\ntidygeocoder es un paquete que permite hacer geolocalizaci√≥n y geolocalizaci√≥n inversa. Internamente, tidygeocoder hace uso de distintos servicios de geolocalizaci√≥n, como Nominatim, Google Maps, Bing Maps, OpenCage, etc. Puede ver detalles aqu√≠.\nPor supuesto, hay m√°s paquetes, como por ejemplo rgeocodio, pero no los he usado.\nRecientemente ha salido un nuevo paquete para geolocalizar: arcgeocoder, pero tampoco lo he usado."
  },
  {
    "objectID": "blog_TBits/002_geolocalizacion.html#biblio",
    "href": "blog_TBits/002_geolocalizacion.html#biblio",
    "title": "Geolocalizaci√≥n con R",
    "section": "\n6 Biblio",
    "text": "6 Biblio\n\nGeocode address text strings using tidygeocoder de Ilya Kashnitsky\nGeocoding in R de Andr√©s Garc√≠a y SESYNC\nR: Mapping and Geospatial. Duke University Libraries"
  },
  {
    "objectID": "blog_TBits/001_imagenes_stabilityAI.html",
    "href": "blog_TBits/001_imagenes_stabilityAI.html",
    "title": "Im√°genes con stabilityAI",
    "section": "",
    "text": "Vamos a usar el paquete stabilityAI de David Schoch para conectarnos a la API de stability.ai para generar im√°genes partiendo de prompts textuales.\nEste es uno de los ejercicios que hicimos en clase y creo que les gust√≥ a los estudiantes."
  },
  {
    "objectID": "blog_TBits/001_imagenes_stabilityAI.html#conectando-r-con-la-api-de-stability.ai",
    "href": "blog_TBits/001_imagenes_stabilityAI.html#conectando-r-con-la-api-de-stability.ai",
    "title": "Im√°genes con stabilityAI",
    "section": "\n1 Conectando R con la API de stability.ai",
    "text": "1 Conectando R con la API de stability.ai\nPara conectarnos a la API de stability.ai hemos de seguir los siguientes pasos:\n\n\nInstalar el paquete\nremotes::install_github(\"schochastics/stabilityAI\")\n\n\nGenerar una API key en stability.ai. Para ello hay que ir aqu√≠. donde nos logearemos con nuestra cuenta de Google para despu√©s generar una API key.\nLa APi key tendr√° una pinta como esta: xx-sbbbbbsbsbbsbbsbsbbsbsbbsbsbsbbsbsbsbbsbsbsbsbU. Gu√°rdala porque tendr√°s copiarla en el fichero .Renviron\n\n\nUna vez tengas la API-key has de copiarla en el fichero .Renviron. Para ello ejecuta en R:\nusethis::edit_r_environ()\nSe abrir√° el fichero .Renviron en RStudio o en el editor de texto que tengas configurado. Has de a√±adir a ese fichero la siguiente linea:\nSTABILITYAI_API_KEY=\"xx-sbbbbbsbsbbsbbsbsbbsbsbbsbsbsbbsbsbsbbsbsbsbsbU\"\nYa hemos terminado el proceso de configuraci√≥n. Ya podemos generar im√°genes desde R.\nEste proceso nos da acceso a una serie de modelos. Veamoslos\nstabilityAI::get_engines_list()\n\n\n\n\n                                   description\n1            Real-ESRGAN_x2plus upscaler model\n2        Stability-AI Stable Diffusion XL v0.9\n3        Stability-AI Stable Diffusion XL v1.0\n4           Stability-AI Stable Diffusion v1.6\n5           Stability-AI Stable Diffusion v2.1\n6 Stability-AI Stable Diffusion XL Beta v2.2.2"
  },
  {
    "objectID": "blog_TBits/001_imagenes_stabilityAI.html#generando-im√°genes",
    "href": "blog_TBits/001_imagenes_stabilityAI.html#generando-im√°genes",
    "title": "Im√°genes con stabilityAI",
    "section": "\n2 Generando im√°genes",
    "text": "2 Generando im√°genes\nVamos a generar alguna imagen. Para ello us√© peque√±as variantes de este promtp:\n\nEl cantautor apodado Peque√±o mulo toca la guitarra junto a Laura de Comando autonomo en el pub Volander. El publico aplaude a rabiar. La perrita Jucar se pasea entre el p√∫blico‚Äù\n\n\nC√≥digomy_IA_img &lt;- stabilityAI::generate_txt2img(\n  text_prompts = \"El cantautor apodado Peque√±o mulo toca la guitarra junto a Laura de Comando autonomo en el pub Volander. El publico aplaude a rabiar. La perrita Jucar se pasea entre el p√∫blico\",\n  #style_preset = \"pixel-art\"\n  #- https://platform.stability.ai/docs/api-reference#tag/v1generation/operation/textToImage\n)\n\n\nLa API de StabilityAI nos devuelve la imagen pero codificada en base64. Para convertirla a un fichero de imagen podemos ejecutar el siguiente c√≥digo:\n\nC√≥digostabilityAI::base64_to_img(my_IA_img ,\"./imagenes/my_IA_img_00\")\n\n\nGener√© 4 im√°genes modificando ligeramente el promt. Este es el resultado:\n\n\n\n\n\n\n\n\n(A)\n\n\n\n\n\n(B)\n\n\n\n\n\n\n\n(C)\n\n\n\n\n\n(D)"
  },
  {
    "objectID": "blog_TBits/001_imagenes_stabilityAI.html#un-poco-sobre-la-api-de-stability.ai",
    "href": "blog_TBits/001_imagenes_stabilityAI.html#un-poco-sobre-la-api-de-stability.ai",
    "title": "Im√°genes con stabilityAI",
    "section": "\n3 Un poco sobre la API de stability.ai",
    "text": "3 Un poco sobre la API de stability.ai\nLa documentaci√≥n de la API de stability.ai est√° aqu√≠ pero no he jugado muvho con ella. s√≥lo he probado a cambiar el estilo de la imagen. Por ejemplo, si queremos que la imagen tenga un estilo de pixel-art, hemos de a√±adir el par√°metro style_preset = \"pixel-art\". Los posibles estilos son: 3d-model, analog-film, anime, cinematic, comic-book, digital-art, enhance, fantasy-art, isometric, line-art, low-poly, modeling-compound, neon-punk, origami, photographic, pixel-art, y tile-texture.\n\nC√≥digomy_IA_img &lt;- stabilityAI::generate_txt2img(\n  text_prompts = \"El cantautor apodado Peque√±o mulo toca la guitarra junto a Laura de Comando autonomo en el pub Volander. El publico aplaude a rabiar\",\n  style_preset = \"pixel-art\"\n  #- https://platform.stability.ai/docs/api-reference#tag/v1generation/operation/textToImage\n)\n\n\n\n\n(A)\n\n\nC√≥digomy_IA_img &lt;- stabilityAI::generate_txt2img(\n  text_prompts = \"El cantautor apodado Peque√±o mulo toca la guitarra junto a Laura de Comando autonomo en el pub Volander. El publico aplaude a rabiar\",\n  style_preset = \"neon-punk\"\n  #- https://platform.stability.ai/docs/api-reference#tag/v1generation/operation/textToImage\n)\n\n\n\n\n(A)"
  },
  {
    "objectID": "blog_TBits/001_imagenes_stabilityAI.html#m√°s-cosas",
    "href": "blog_TBits/001_imagenes_stabilityAI.html#m√°s-cosas",
    "title": "Im√°genes con stabilityAI",
    "section": "\n4 M√°s cosas",
    "text": "4 M√°s cosas\nEvidentemente se puede acceder a los modelos de stability.ai sin usar un lenguaje de programaci√≥n; por ejemplo, se puede acceder directamente desde Dream Studio1. Dream Studio es un sitio web para generar im√°genes con Stable Diffusion, uno de los modelos de stabilty.ai.\nS√≠, generar im√°genes a partir texto es divertido, pero recuerda que hay multitud de repositorios de im√°genes (y otros recursos) p√∫blicas, por ejemplo The Public Domain Review o Open Culture. Otras como Unsplash o Pexels permiten descargar im√°genes de forma gratuita y legal."
  },
  {
    "objectID": "blog_TBits/001_imagenes_stabilityAI.html#footnotes",
    "href": "blog_TBits/001_imagenes_stabilityAI.html#footnotes",
    "title": "Im√°genes con stabilityAI",
    "section": "Notas",
    "text": "Notas\n\nEste link supongo que se quedar√° obsoleto en nada‚Ü©Ô∏é"
  },
  {
    "objectID": "blog_TBits/003_datos_para_estudiantes.html",
    "href": "blog_TBits/003_datos_para_estudiantes.html",
    "title": "Datos para los trabajos",
    "section": "",
    "text": "En mis cursos sobre R, una parte importante de la evaluaci√≥n y del curso son los trabajos en equipo e individuales; as√≠ que para facilitar la b√∫squeda de datos a los estudiantes he confeccionado este listado con fuentes de datos.\nAlgunos de los trabajos ya hechos por los estudiantes puedes verlos aqu√≠. La tem√°tica y, por tanto, los datos utilizados var√≠an mucho, pero √∫ltimamente se han hecho m√°s trabajos sobre temas relacionados con la econom√≠a. El √∫ltimo a√±o 3 trabajos en equipo, de un total de 9 se centraron en la situaci√≥n de los j√≥venes. Hab√≠a preocupaci√≥n!! En los trabajos individuales hay m√°s variedad: tiburones, meteoritos, etc‚Ä¶, etc‚Ä¶, pero los deportes y la m√∫sica nunca faltan."
  },
  {
    "objectID": "blog_TBits/003_datos_para_estudiantes.html#diversas-fuentes-de-datos",
    "href": "blog_TBits/003_datos_para_estudiantes.html#diversas-fuentes-de-datos",
    "title": "Datos para los trabajos",
    "section": "\n1 Diversas fuentes de datos",
    "text": "1 Diversas fuentes de datos\n\nGoogle Dataset Search: esta herramienta puede ser √∫til para encontrar datos. Aqu√≠ tienes un post, aqu√≠ el articulo de lanzamiento del producto en 2018 y aqu√≠ las FAQ‚Äôs. Lo he usado poco (o nada) pero te da hasta una lista de art√≠culos que han usado un conjunto de datos!!!\nKaggle. Es una plataforma de competiciones de machine learning. Puedes encontrar datos, an√°lisis y el c√≥digo. Impresionante. Hay mucho c√≥digo en R, pero digamos que es m√°s territorio Phyton. Los datos aqu√≠.\nData is plural. Es una newsletter semanal con datos interesantes. Puedes buscar en el archivo de la newsletter. El archivo est√° aqu√≠ y aqu√≠ con m√°s informaci√≥n.\nHugging Face. Es una plataforma de IA. Puedes encontrar datasets y modelos, pero no os lo recomiendo, suelen ser conjuntos de datos para tareas de audio, visi√≥n por computadora y procesamiento del lenguaje natural (NLP). Se nos, al menos a mi, escapa un poco.\nCivio. Es una ONG que trabaja con datos para intentar aumentar la transparencia y controlar a los poderes p√∫blicos. Evidentemente, tienen una secci√≥n de datos abiertos.\nTidy Tuesday. Es un proyecto semanal de datos organizado por la comunidad de R. Cada semana se hacen visualizaciones sobre un nuevo conjunto de datos\nFiveThirtyEight. FiveThirtyEight, a veces llamado 538, es un blog estadounidense que se centra en el an√°lisis pol√≠tico y encuestas, aunque tambi√©n hace an√°lisis de datos sobre otras tem√°ticas. En este repo se encuentran los datos utilizados en los art√≠culos.Aqu√≠ tiene un indice de los datos. Hay un paquete de R, tambi√©n llamado fivethirtyeight que igual puede ayudar a cargar los datos.\nOur World in data. Es una publicaci√≥n que hace an√°lisis emp√≠ricos sobre las condiciones de vida. Trata temas como la pobreza, educaci√≥n, salud ‚Ä¶ Hay un paquete de R, owidR que facilita el uso de esos datos.\nGapminder es una fundaci√≥n sueca sin √°nimo que utiliza datos para cambiar ciertas concepciones err√≥neas sobre problemas globales. Los datos los tiene aqu√≠\nBuzzFeedNews es un peri√≥dico que ofrece art√≠culos/historias basadas en datos. Aqu√≠ tienes un listado de art√≠culos y datos, y [aqu√≠]((https://github.com/BuzzFeedNews) el repo de Github con el c√≥digo de los art√≠culos. En clase solemos replicar este gr√°fico chulo. El art√≠culo donde aparece el gr√°fico est√° est√° aqu√≠,y el c√≥digo est√° aqu√≠.\nEuropean Data Journalism Network (EDJNet) is a network of media organisations from all across Europe, producing and promoting data-driven coverage of European issues. Los datos aqu√≠.\nReal World Data Science, un proyecto de la Royal Statistical Society que presenta real-world applications of data science. Aqu√≠ est√°n los casos de estudio.\nInformation is Beautiful provee de m√°s de 300 datasets: aqu√≠ y aqu√≠\nLIS, The Luxembourg Income Study, is a data archive and research center dedicated to cross-national analysis and is home to two databases sobre Renta y Riqueza. Hay un paquete de R, lissyrtools.\nThe Global economy recopila datos econ√≥micos de 200 pa√≠ses. Para descargar los datos, aqu√≠"
  },
  {
    "objectID": "blog_TBits/003_datos_para_estudiantes.html#estad√≠sticas-oficiales",
    "href": "blog_TBits/003_datos_para_estudiantes.html#estad√≠sticas-oficiales",
    "title": "Datos para los trabajos",
    "section": "\n2 Estad√≠sticas oficiales",
    "text": "2 Estad√≠sticas oficiales\nEn Econom√≠a, las estad√≠sticas oficiales de organismos como Eurostat, INE, ONU, FMI etc‚Ä¶ etc‚Ä¶ son una fuente de datos importante. Aqu√≠ presentar√© algunos paquetes de R que facilitan el acceso a esos datos.\n\n\nEurostat: eurostat. Es fant√°stico. Haremos varios ejemplos en clase. Aqu√≠ el portal de datos de Eurostat.\nBanco de Espa√±a: tidyBdE. No lo he usado. Aqu√≠ el portal de datos del Banco de Espa√±a.\n\n\nC√≥digodf &lt;- tidyBdE::bde_catalog_load(\n  catalog = c(\"ALL\"),\n  parse_dates = TRUE,\n  cache_dir = NULL,\n  update_cache = FALSE,\n  verbose = FALSE\n)\n\n\n\nBanco Central Europeo: ecb. No lo he usado. Aqu√≠ el portal de datos del BCE y aqu√≠ los datasets.\nThe World Bank. Los indicadores aqu√≠. hay varios paquetes: WDI, wbstats. Aqu√≠ un bookdown sobre la API del Worls Bank.\nOCDE. Los datos aqu√≠. Hay un paquete de R, oecd que facilita el acceso a esos datos. Aqu√≠ un post.\nUN population Dividion: population estimates from 1950 to the present for 237 countries or √°reas. Aqu√≠ un paquete de R.\nUN comtrade database: datos detallados de comercio global. Aqu√≠ un post sobre c√≥mo usar su API con R."
  },
  {
    "objectID": "blog_TBits/003_datos_para_estudiantes.html#m√°s-datos",
    "href": "blog_TBits/003_datos_para_estudiantes.html#m√°s-datos",
    "title": "Datos para los trabajos",
    "section": "\n3 M√°s datos",
    "text": "3 M√°s datos\nAlgunos conjuntos de datos que en su d√≠a me llamaron la atenci√≥n, seguramente pens√© que podr√≠an usarse para los trabajos.\n\nDatos de olimpiadas (medallas, altura y peso) aqu√≠\nDatos de refugiados de la UNHCR, la agencia de refugiados de la ONU, aqu√≠. Hay un paquete de R, refugees, que facilita el acceso a esos datos. Aqu√≠ un gr√°fico de Nicola Rennie con estos datos.\nScrappeando datos del TOUR de Francia\nAtlas of the Offshore World es un nuevo proyecto de the EU Tax Observatory sobre evasi√≥n fiscal."
  },
  {
    "objectID": "blog_TBits/003_datos_para_estudiantes.html#papers-con-datos",
    "href": "blog_TBits/003_datos_para_estudiantes.html#papers-con-datos",
    "title": "Datos para los trabajos",
    "section": "\n4 Papers con datos",
    "text": "4 Papers con datos\n\nHarvard Dataverse: u servicio de Harvad con art√≠culos cient√≠ficos que hacen p√∫blicos sus datos.\nFinding Economic Articles with Data:: un shiny de Sebastian Kranz que te ayuda a encontrar art√≠culos con datos."
  },
  {
    "objectID": "blog_TBits/003_datos_para_estudiantes.html#otros-listados",
    "href": "blog_TBits/003_datos_para_estudiantes.html#otros-listados",
    "title": "Datos para los trabajos",
    "section": "\n5 Otros listados",
    "text": "5 Otros listados\n\nRebecca Carter\nInterview Query\n30+ Free Datasets for Your Data Science Projects in 2024"
  },
  {
    "objectID": "blog_TBits/003_datos_para_estudiantes.html#para-docencia",
    "href": "blog_TBits/003_datos_para_estudiantes.html#para-docencia",
    "title": "Datos para los trabajos",
    "section": "\n6 Para docencia",
    "text": "6 Para docencia\n\nEl paqueteRdatasets agrupa 2264 conjuntos de datos relacionados con el entorno R. Quiz√°s sean m√°s adecuados con fines did√°cticos. El listado de datos est√° aqu√≠\nEl paquete HistData contiene un conjunto da collection of small data sets that are interesting and important in the history of statistics and data visualization"
  },
  {
    "objectID": "blog_TBits/003_datos_para_estudiantes.html#apis",
    "href": "blog_TBits/003_datos_para_estudiantes.html#apis",
    "title": "Datos para los trabajos",
    "section": "\n7 API‚Äôs",
    "text": "7 API‚Äôs\n\n\nPublic APIs es a collective list of free APIs for use in software and web development. No vamos a ver c√≥mo acceder a API‚Äôs, pero no est√° mal tenerlas en este listado."
  },
  {
    "objectID": "blog_Rflowers/2023-07-12_premios-literarios_01/index.html",
    "href": "blog_Rflowers/2023-07-12_premios-literarios_01/index.html",
    "title": "Premios literarios: obtenci√≥n de los datos",
    "section": "",
    "text": "Resulta que vi este tweet que mostraba los pocos premios Nobel que ganan las mujeres y pens√© que por qu√© no hacerlo para los principales premios literarios espa√±oles."
  },
  {
    "objectID": "blog_Rflowers/2023-07-12_premios-literarios_01/index.html#footnotes",
    "href": "blog_Rflowers/2023-07-12_premios-literarios_01/index.html#footnotes",
    "title": "Premios literarios: obtenci√≥n de los datos",
    "section": "Notas",
    "text": "Notas\n\n\nahora estoy retomando el blog en enero de 2024‚Ü©Ô∏é\nNota para mi: los an√°lisis los hice en el proyecto ./slides_Barcelona_R-2023‚Ü©Ô∏é"
  },
  {
    "objectID": "blog_Rflowers/2022-07-13_censos-historicos_02/index.html#introducci√≥n",
    "href": "blog_Rflowers/2022-07-13_censos-historicos_02/index.html#introducci√≥n",
    "title": "Evoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)",
    "section": "\n1 Introducci√≥n",
    "text": "1 Introducci√≥n\nEn el post anterior describ√≠ el proceso para obtener los datos de los censos hist√≥ricos del INE. Los censos proporcionan datos de poblaci√≥n a nivel municipal1, de forma que ahora utilizar√© esos datos para analizar como ha evolucionado el n√∫mero de municipios en Espa√±a en el tiempo.\n\n\nObjetivo: ver la evoluci√≥n del n√∫mero de municipios en Espa√±a.\nEl municipio en Espa√±a es una entidad administrativa de nivel local que puede agrupar a una o varias localidades; por ejemplo el municipio de Pancrudo agrupa cuatro localidades2.Los municipios no son entidades fijas, sino que por distintos motivos hay municipios que desaparecen y otros que aparecen. Por ejemplo, Torremolinos existi√≥ como municipio hasta el censo de 1920, para desaparecer en el de 1930 por su integraci√≥n en el municipio de M√°laga, para posteriormente, en el censo de 1991, volver a ser municipio tras segregarse de M√°laga.\n\n\nEl n√∫mero de municipios cambia en el tiempo."
  },
  {
    "objectID": "blog_Rflowers/2022-07-13_censos-historicos_02/index.html#cuantos-municipios-han-existido-en-espa√±a",
    "href": "blog_Rflowers/2022-07-13_censos-historicos_02/index.html#cuantos-municipios-han-existido-en-espa√±a",
    "title": "Evoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)",
    "section": "\n2 ¬øCuantos municipios han existido en Espa√±a?",
    "text": "2 ¬øCuantos municipios han existido en Espa√±a?\nDeber√≠a ser una pregunta f√°cil de responder pero no lo es; como ejemplo este documento. Hasta donde yo s√©, no existe en Espa√±a un registro del que pueda obtenerse el n√∫mero de municipios que han existido en el tiempo; as√≠ que, tratar√© de dar una respuesta utilizando los datos de los Censos hist√≥ricos y del Padr√≥n.\n\n\nNo es una pregunta f√°cil.\nLo que si puedo decir es que, con datos del Padr√≥n de 2021, actualmente hay en Espa√±a 8.131 municipios.\n\n\nActualmente hay 8.131 municipios.\nEl INE proporciona datos de 18 censos de poblaci√≥n, el primero en 1842 y el √∫ltimo en 2011. En el censo de 1842 hay datos de 11.291 municipios, mientras que en el de 2021, hay 8.116; es decir, una reducci√≥n de 3.175 municipios a lo largo de este periodo. Con esta informaci√≥n parece que la respuesta deber√≠a ser 11.291, pero no es as√≠, la din√°mica de creaci√≥n y desaparici√≥n de municipios es m√°s compleja, hay municipios como Torremolinos, que desaparecen y vuelven a aparecer.\nEn los 18 censos que proporciona el INE podemos encontrar un total de 11.910 c√≥digos municipales √∫nicos, as√≠ que parece que han existido en ese periodo el mismo n√∫mero de municipios. Digo parece porque la respuesta no es tan clara, ya que hay casos como la localidad Gatova, que cambi√≥ su c√≥digo municipal de 12066 a 46092 al incorporarse a la provincia de Valencia, desde la de Castell√≥n, en el censo de 2001. ¬øSon municipios diferentes? Bueno, podemos pensar que s√≠, ya que tienen c√≥digos municipales diferentes.\nAs√≠ que, seg√∫n mis cuentas y utilizando datos de los Censos3, han existido4 en Espa√±a 11.910 municipios.\n\n\nCon datos de los Censos, de 1842 a 2011, han existido 11.910 municipios.\nSin embargo, el √∫ltimo censo publicado es de 2011 y estamos en 2022, as√≠ que se han podido crear m√°s municipios desde 2011 hasta la actualidad. Efectivamente, si utilizamos los datos del Padr√≥n5, desde 2011 a 2022 se crearon en Espa√±a 16 municipios que no exist√≠an antes, por lo que la respuesta final es: han existido 11.926 municipios en Spain.\n\n\nA√±adiendo los datos del Padr√≥n, ese n√∫mero aumenta hasta los 11.926 municipios.\nComo actualmente, con datos del Padr√≥n de 2021, existen 8.131 municipios6, eso quiere decir que desde el censo de 1842 se ha reducido el n√∫mero de municipios en 3.795."
  },
  {
    "objectID": "blog_Rflowers/2022-07-13_censos-historicos_02/index.html#evoluci√≥n-del-n√∫mero-de-municipios-censos",
    "href": "blog_Rflowers/2022-07-13_censos-historicos_02/index.html#evoluci√≥n-del-n√∫mero-de-municipios-censos",
    "title": "Evoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)",
    "section": "\n3 Evoluci√≥n del n√∫mero de municipios (Censos)",
    "text": "3 Evoluci√≥n del n√∫mero de municipios (Censos)\nUtilizando los datos de los 18 censos de poblaci√≥n disponibles en la web del INE, la evoluci√≥n del n√∫mero de municipios puede verse en Figura¬†1 .\n\n\n\n\n\n\n\nGr√°fico¬†1: Evoluci√≥n del n√∫mero de municipios (datos de los Censos). Juro que mejorar√© el gr√°fico!!!!\n\n\n\n\nEn la Figura¬†1 se aprecia que desde 1842 se ha reducido el n√∫mero de municipios, principalmente entre el censo de 1842 y el de 1933, y en los censos de 1979 y 1981. De las explicaciones no s√© mucho: 1) el censo de 1842 fue, como le√≠ no s√© donde, un censo extra√±o, y 2) A partir de 1970 se hizo un esfuerzo pol√≠tico por reducir el n√∫mero de municipios ‚Ä¶..\nPara ahondar un poco m√°s en la din√°mica de la evoluci√≥n del n√∫mero de municipios en el tiempo, en la siguiente tabla se muestra m√°s informaci√≥n.\n\n\n\nC√≥digolibrary(tidyverse)\n\ndf &lt;- pjpv.datos.2022::ine_censos_historicos #- censos hist√≥ricos (1842-2011)\n\n# TABLA GOOD del CENSO: \ntabla_0 &lt;- df %&gt;% drop_na(pob) %&gt;% \n  group_by(year) %&gt;% summarise(nn = n_distinct(ine_muni))\n\ntabla_1 &lt;- df %&gt;% \n  filter(indicador %in% c(\"aparece\", \"desaparece\")) %&gt;% \n  count(year, indicador) %&gt;% \n  pivot_wider(names_from = indicador, values_from = n) %&gt;% \n  mutate(nn_netos = aparece - desaparece) %&gt;% \n  add_case(year = 1842, .before = 1)\n\ntabla_1a &lt;- left_join(tabla_0, tabla_1) %&gt;% \n  mutate(comprobacion = nn_netos) %&gt;% \n  mutate(comprobacion = ifelse(year == \"1842\", first(nn), comprobacion)) %&gt;% \n  mutate(comprobacion = cumsum(comprobacion) - nn)\n\ntabla_censo_ok &lt;- tabla_1a %&gt;% select(-comprobacion)\nnames(tabla_censo_ok) &lt;- c(\"Censo\", \"N¬∫ municipios\", \"desaparecen\", \"aparecen\", \"Incremento\")\ntabla_censo_ok &lt;- tabla_censo_ok %&gt;% select(1, 2, \"Incremento\", everything())\n\ntable_ok &lt;- tabla_censo_ok %&gt;% \n  reactable::reactable(defaultPageSize = 18, theme = reactablefmtr::fivethirtyeight()) \n\ntable_ok\n\n\n\n\n\n\n\n\nLa Figura¬†1 proporciona informaci√≥n, pero la tabla anterior amplia un poco esa informaci√≥n, apreci√°ndose que del censo de 1842 al siguiente se redujo el n√∫mero de municipios en 1933; pero esa reducci√≥n, como se aprecia en la tabla, es resultado de que desaparecieron 2.199 municipios mientras que aparecieron, o se crearon, 266."
  },
  {
    "objectID": "blog_Rflowers/2022-07-13_censos-historicos_02/index.html#evoluci√≥n-del-n√∫mero-de-municipios-padr√≥n",
    "href": "blog_Rflowers/2022-07-13_censos-historicos_02/index.html#evoluci√≥n-del-n√∫mero-de-municipios-padr√≥n",
    "title": "Evoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)",
    "section": "\n4 Evoluci√≥n del n√∫mero de municipios (Padr√≥n)",
    "text": "4 Evoluci√≥n del n√∫mero de municipios (Padr√≥n)\nSi en lugar de los datos de los Censos, utilizamos los datos del Padr√≥n (1996, 1998-2021) la evoluci√≥n del n√∫mero de municipios en Espa√±a quedar√≠a como:\n\n\n\n\n\n\n\nGr√°fico¬†2: Evoluci√≥n del n√∫mero de municipios (datos del Padr√≥n) Juro que mejorar√© el gr√°fico!!!\n\n\n\n\nLa Figura¬†2 muestra que a partir de 1996, el n√∫mero de municipios ha aumentado de forma muy suave pero continuada, hasta llegar a los 8.131 municipios en 2021."
  },
  {
    "objectID": "blog_Rflowers/2022-07-13_censos-historicos_02/index.html#curiosidades",
    "href": "blog_Rflowers/2022-07-13_censos-historicos_02/index.html#curiosidades",
    "title": "Evoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)",
    "section": "\n5 Curiosidades",
    "text": "5 Curiosidades\nEn las Figura¬†1 y Figura¬†2 se muestran datos sobre la evoluci√≥n del n√∫mero de municipios, y hay 2 a√±os (2001 y 2011) en que tenemos cifras para el n√∫mero de municipios procedentes de 2 fuentes: Censos y padr√≥n. ¬øCoincidir√°n? No . Ya dir√© porqu√©. Es ‚Äúlogico‚Äù, bueno, puede pasar."
  },
  {
    "objectID": "blog_Rflowers/2022-07-13_censos-historicos_02/index.html#biblio",
    "href": "blog_Rflowers/2022-07-13_censos-historicos_02/index.html#biblio",
    "title": "Evoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)",
    "section": "\n6 Biblio",
    "text": "6 Biblio\nBiblio:\n\nart√≠culo PAIS: https://elpais.com/elpais/2017/02/02/media/1486066904_389254.html La mitad de municipios puede desaparecer"
  },
  {
    "objectID": "blog_Rflowers/2022-07-13_censos-historicos_02/index.html#footnotes",
    "href": "blog_Rflowers/2022-07-13_censos-historicos_02/index.html#footnotes",
    "title": "Evoluci√≥n del n√∫mero de municipios en Espa√±a (1842-2021)",
    "section": "Notas",
    "text": "Notas\n\nPara obtener datos de poblaci√≥n a nivel de localidad o n√∫cleos de poblaci√≥n hay que acudir al Nomencl√°tor del INE.‚Ü©Ô∏é\nUna localidad es una divisi√≥n administrativa o territorial formada por un n√∫cleo de poblaci√≥n con identidad propia, ya sea esta una aldea, pueblo o ciudad‚Ü©Ô∏é\nEn realidad seg√∫n los c√≥digos municipales √∫nicos que he encontrado en la web de los censos hist√≥ricos del INE‚Ü©Ô∏é\nEn realidad deber√≠a decir han sido censados.‚Ü©Ô∏é\nUtilizo datos de poblaci√≥n del Padr√≥n continuo 1996 y 1998 a 2021‚Ü©Ô∏é\nHay otra forma de obtener el listado de municipios actuales; a trav√©s del Registro de entidades locales, concr√©tamente el listado de municipios se puede obtener aqu√≠. Pues bien otra complicaci√≥n m√°s, de la que me enter√© tambi√©n por Paco Goerlich: en el REL existe un ‚Äúmunicipio‚Äù (Tharsis, con c√≥digo 21901) que nunca ha estado presente en el Padr√≥n. Misterios de las estad√≠sticas oficiales!!! Igual esta noticia puede arrojar algo de luz, parece que la Junta de Andalucia aprob√≥ la segregaci√≥n de Tharsis de Alosno, pero finalmente el Tribunal Supremo confirm√≥ la sentencia del TSJA anulando el decreto de segregaci√≥n de Tharsis de Alosno; sin embargo, a pesar de estar en una situaci√≥n similar, si aparece en el Padr√≥n el municipio de La Zarza-Perrunal (21902)‚Ü©Ô∏é"
  },
  {
    "objectID": "blog_Rflowers/2022-07-14_censos-historicos_03/index.html",
    "href": "blog_Rflowers/2022-07-14_censos-historicos_03/index.html",
    "title": "Municipios espa√±oles m√°s poblados (1842-2021)",
    "section": "",
    "text": "Nota: Este post lo empec√© en julio de 2022. Ten√≠a los gr√°ficos y dem√°s, pero lo tuve que abandonar. Ahora, un a√±o despu√©s, julio de 2023, lo estoy retomando; pero solo voy a poner algunos gr√°ficos y tablas de los que hice. Poco m√°s. No pienso redactar mucho üòâ."
  },
  {
    "objectID": "blog_Rflowers/2022-07-14_censos-historicos_03/index.html#introducci√≥n",
    "href": "blog_Rflowers/2022-07-14_censos-historicos_03/index.html#introducci√≥n",
    "title": "Municipios espa√±oles m√°s poblados (1842-2021)",
    "section": "\n1 Introducci√≥n",
    "text": "1 Introducci√≥n\nVoy a utilizar datos de los censos hist√≥ricos de poblaci√≥n del INE1 para analizar la evoluci√≥n del ranking de municipios espa√±oles m√°s poblados. Al l√≠o!!"
  },
  {
    "objectID": "blog_Rflowers/2022-07-14_censos-historicos_03/index.html#ranking-de-municipios-m√°s-poblados",
    "href": "blog_Rflowers/2022-07-14_censos-historicos_03/index.html#ranking-de-municipios-m√°s-poblados",
    "title": "Municipios espa√±oles m√°s poblados (1842-2021)",
    "section": "\n2 Ranking de municipios m√°s poblados",
    "text": "2 Ranking de municipios m√°s poblados\nVoy a mostrar en una tabla y un gr√°fico el ranking de los municipios mas poblados en cada censo. Mostrar√© solo los municipios que en alguno de los censos haya estado entre los 20 municipios mas poblados. Para que la tabla y los gr√°ficos se vean razonablemente bien voy a mostrar los resultados de solo algunos de los censos y para acercarnos m√°s a la situaci√≥n actual, usar√© tambi√©n datos de poblaci√≥n del Padr√≥n de 2021.\nTabla\n\n\n\nC√≥digo# Post censos hist√≥ricos\n# Objetivo: ver que capitales de provincia estuvieron en alg√∫n momento entre las 10 m√°s pobladas\nlibrary(tidyverse)\n\n# cargo censos hist√≥ricos \ndf &lt;- pjpv.datos.2022::ine_censos_historicos\n\n# fusiono con datos de padr√≥n 2021 \ndf_padron &lt;- pjpv.curso.R.2022::ine_pob_mun_1996_2021 %&gt;% \n  filter(year == 2021) %&gt;% filter(poblacion == \"Total\") %&gt;% \n  select(- poblacion, - ine_muni.n.orig) %&gt;% \n  rename(pob = values) %&gt;% \n  select(ine_muni, year, pob)\n\n# quito municipios de 2021 que no estan en df (1842-2011)\ndf_padron &lt;- df_padron %&gt;% filter(ine_muni %in% unique(df$ine_muni))\n\n# pongo a df las v. q van a hacer falta (ine_prov etc ....\nzz &lt;- df %&gt;% select(ine_muni, ine_muni.n.h, ine_prov, ine_prov.n, ine_ccaa, \n                    ine_ccaa.n, capital_prov, capital_ccaa, year) %&gt;% \n     filter(year == 2011) %&gt;% \n     select(-year)\n\n\ndf_padron &lt;- left_join(df_padron, zz)\n\n\n# fusiono censos y padr√≥n OK \ndf &lt;- full_join(df, df_padron)\nzz &lt;- df %&gt;% filter(ine_muni == \"28079\")\nzz &lt;- df %&gt;% filter(ine_muni.n.h == \"Pancrudo\")\n\n\n# calculo rankings (para cada censo)\ndf &lt;- df %&gt;%\n  #select(year, ine_muni, ine_muni.n, pob, ine_prov)  %&gt;%\n  group_by(year) %&gt;%\n  arrange(desc(pob), desc(lag(pob)) )  %&gt;%\n  mutate(rank_1 = 1:n(), .after = pob) %&gt;%\n  mutate(rank_2 = dplyr::dense_rank(desc(pob))) %&gt;%\n  ungroup() %&gt;% \n  arrange(year)\n\n# calculo tb variaciones en el ranking\ndf &lt;- df %&gt;%\n  group_by(ine_muni) %&gt;%\n  arrange(year) %&gt;%\n  mutate(rank_dif_1 = lag(rank_1) - rank_1, .after = rank_1) %&gt;% \n  mutate(rank_max_dif_1 = \n           max(rank_1, na.rm = TRUE) - min(rank_1, na.rm = TRUE), \n         .after = rank_dif_1) %&gt;% ungroup()\n  \nzz &lt;- df %&gt;% filter(ine_muni.n.h == \"Teruel\")\n\n\n\n# calculo de crecimientos etc....\ndf &lt;- df %&gt;%\n  group_by(ine_muni) %&gt;%\n  arrange(year) %&gt;%\n  dplyr::mutate(pob_incre = pob - lag(pob)) %&gt;%\n  dplyr::mutate(pob_percent = pob_incre / lag(pob) * 100) %&gt;%\n  dplyr::mutate(qq_years = year - lag(year)) %&gt;%\n  dplyr::mutate(pob_percent_acu = cumsum(coalesce(pob_incre,0)/first(pob)*100)) %&gt;%\n  dplyr::mutate(qq_years_acu = cumsum(ifelse(is.na(qq_years), 0, qq_years))) %&gt;%\n  dplyr::mutate(crec_percent_medio = pob_percent/qq_years) %&gt;% \n  dplyr::mutate(crec_percent_medio_acu = pob_percent_acu/qq_years_acu) %&gt;% \n  relocate(c(ine_prov, ine_prov.n), .after = last_col()) %&gt;% ungroup\n\nzz &lt;- df %&gt;% filter(ine_muni.n.h == \"Teruel\")\n\n\n# veamos q capitales de prov. han estado alguna vez entre las 10 m√°s pobladas\nqq_mas_pobladas &lt;- 20\nzz &lt;- df %&gt;%\n  filter(rank_1 &lt;= qq_mas_pobladas) %&gt;%\n  distinct(ine_muni, ine_muni.n.h) %&gt;% pull(ine_muni.n.h) #%&gt;% print()  # 17 ciudades (cuidado con filtrar x nombre)\n\nzz &lt;- df %&gt;%\n  filter(rank_1 &lt;= qq_mas_pobladas) %&gt;%\n  distinct(ine_muni, ine_muni.n.h)  # xx ciudades (cuidado con filtrar x nombre)\n#print(zz$ine_muni.n.h)\n\n# filtremos, qued√©monos con los datos de esas xx ciudades\ndf_table &lt;- df %&gt;% filter(ine_muni %in% zz$ine_muni)   # ok\n\n\n# Tablas ----------------------------------------------------------------------\n# nos quedamos con las 3 v. q queremos mostrar\ndf_table &lt;- df_table %&gt;%\n  select(ine_muni.n.h, year, rank_1)\n\n# hay q pasar la df_table a formato ancho (2 posibilidades)\ndf_t1 &lt;- df_table %&gt;% tidyr::pivot_wider(names_from = year, values_from = rank_1)\ndf_t2 &lt;- df_table %&gt;% tidyr::pivot_wider(names_from = ine_muni.n.h, values_from = rank_1)\n\n# hay muchos pkgs para tablas\n# DT::datatable(df_t1)\n# gt::gt(df_t2)\n\n\n# gt: https://gt.rstudio.com/\n# gallery: https://community.rstudio.com/c/table-gallery/64\n# ejemplo: https://jelloque.github.io/trabajo_BigData/#5_LOS_CICLISTAS\n# otro: https://twitter.com/irg_bio/status/1486291227255451648?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E1486291227255451648&ref_url=file%3A%2F%2F%2Fhome%2Fpjpv%2FEscritorio%2Fmys_COSAS%2Fmy_learn_RR%2Flearn_ggplot2%2Fejemplos_ggplot2_2022.html\n\n# gt::gt(df_t2) %&gt;%\n#   gt::tab_header(title = \"Capitales m√°s pobladas\",\n#     subtitle = glue::glue(\"{min(df$year)} to {max(df$year)}\"))\n\n# quito algunos censos para que las tablas se vean mejor\nzz &lt;- df %&gt;% distinct(year)\n\ndf_ok &lt;- df_t1 %&gt;% rename(municipio = ine_muni.n.h) %&gt;% \n  select(municipio, `1842`, `1857`, `1877`, `1897`, `1910`, `1930`, `1950`, `1970`, `1991`, `2021`)\n\n# table_ok &lt;- df_ok %&gt;% \n#   reactable::reactable(defaultPageSize = 36, compact = TRUE,\n#                        filterable  = TRUE, \n#                        theme = reactablefmtr::fivethirtyeight(cell_padding = 1, font_size = 11, header_font_size = 13)) \n# \n# table_ok\n# \n\n# mejoramos las tablas --------------------\n# DT: https://rstudio.github.io/DT/\n\n# DT::datatable(df_ok, filter = 'top', extensions = \"Scroller\",\n#               class = 'cell-border stripe',\n#               options = list(autoWidth = TRUE,deferRender = TRUE,\n#                              scroller = TRUE, scrollY = 750 ))\n\n\n\n\n\n\n\n\n\n\n\nPor hacer un m√≠nimo comentario de los resultados mostrados en la tabla, se√±alar que Madrid ha estado siempre en el puesto 1 o 2, Barcelona siempre en segundo lugar excepto en los censos de 1910 y 1930. C√°diz pas√≥ de ser la octava ciudad m√°s poblada en 1842, para estar actualmente (2021) en el 57. Lorca ha seguido una evoluci√≥n similar, del noveno puesto al 67. Hospitalet de LLobregat ha experimentado un gran aumento en su puesto en el ranking: era un municipio relativamente peque√±o que ocupaba el puesto 1042 en el a√±o 1842, para estar actualmente en el puesto n√∫mero 16. Por su parte Caravaca de la Cruz era el 16¬∫ municipio por poblaci√≥n en 1842 para descender hasta el puesto 313 en el Padr√≥n de 2021.\nGr√°fico\nLas tablas est√°n muy bien si necesitas sabes los valores exactos de una variable o si quieres ver alg√∫n detalle, pero para ver la evoluci√≥n es mejor un gr√°fico. Vamos a ello.\nEn el primer gr√°fico mostrar√© la evoluci√≥n del ranking de poblaci√≥n para los municipios que alguna vez, en alg√∫n censo, estuvieron entre los 20 municipios m√°s poblados.\n\n\n\n\n\n\n\n\n\n\n\nAhora, el mismo gr√°fico pero con plotly para a√±adirle un poco de interactividad.\n\n\nC√≥digoplotly::ggplotly(p, height = 850, tooltip = c(\"year\", \"rank_1\"))\n\n\n\n\n\n\n\nL√≥gicamente en los gr√°ficos se aprecia mejor la evoluci√≥n del ranking de municipios por poblaci√≥n. Por ejemplo Lorca empez√≥, all√° por 1842, siendo el noveno municipio espa√±ol m√°s poblado, pero fue descendiendo en el ranking hasta el puesto 20 en 1950, y a partir de ah√≠ desaparece del gr√°fico porque su ranking esta por debajo del n¬∫ 50.\n\nM√°s gr√°ficos\nProb√© algunos gr√°ficos m√°s, quedan chulos, pero no son muy √∫tiles porque hay demasiada informaci√≥n. Los tengo en el script 03_ej_caso_901_censos-historicos_ok.R. Pero ser√° para otro d√≠a"
  },
  {
    "objectID": "blog_Rflowers/2022-07-14_censos-historicos_03/index.html#otros-posibles-temas",
    "href": "blog_Rflowers/2022-07-14_censos-historicos_03/index.html#otros-posibles-temas",
    "title": "Municipios espa√±oles m√°s poblados (1842-2021)",
    "section": "\n3 Otros posibles temas",
    "text": "3 Otros posibles temas\nObtuve los datos de los censos hist√≥ricos en 2022. Es 2023 y no me apetece seguir con estos datos, en realidad lo que me apetece es usar otros datos, pero dejo apuntados algunos temas que se podr√≠an analizar con estos datos.\n\nMunicipios desaparecidos: por ejemplo ¬øqu√© provincia ha presentado una mayor desaparici√≥n/fusi√≥n de municipios en el tiempo? por ejemplo un mapa con los municipios desaparecidos y aparecidos en la √©poca moderna del Padr√≥n\nImportancia hist√≥rica de las provincias en cuanto a poblaci√≥n; es decir, que porcentaje representa la poblaci√≥n de cada provincia sobre la poblaci√≥n espa√±ola. Igual puedes tratar de usar un gr√°fico parecido a este\nImportancia hist√≥rica de las capitales de provincia: por ejemplo ver el % que representa la poblaci√≥n de la capital de la provincia respecto a la poblaci√≥n provincial\nConcentraci√≥n de la poblaci√≥n en ciudades: ¬øest√° m√°s concentrada la poblaci√≥n en ciudades grandes? por ejemplo ver la evoluci√≥n del n√∫mero de municipios que acumulan el 50% de la poblaci√≥n"
  },
  {
    "objectID": "blog_Rflowers/2022-07-14_censos-historicos_03/index.html#footnotes",
    "href": "blog_Rflowers/2022-07-14_censos-historicos_03/index.html#footnotes",
    "title": "Municipios espa√±oles m√°s poblados (1842-2021)",
    "section": "Notas",
    "text": "Notas\n\nEn este post expliqu√© el proceso que segu√≠ para obtener los datos‚Ü©Ô∏é"
  },
  {
    "objectID": "blog_TBits.html",
    "href": "blog_TBits.html",
    "title": "TBits",
    "section": "",
    "text": "La idea es ir colgando aqu√≠ peque√±os ejercicios/ejemplos etc‚Ä¶ que hago en clase, o cosillas que leo y medio aprendo. Si no las apuntas se olvidan m√°s r√°pido.\n\n\n\n\n\n\n   \n     \n     \n       Ordenar por\n       Pre-seleccionado\n         \n          T√≠tulo\n        \n         \n          Fecha - Menos reciente\n        \n         \n          Fecha - M√°s reciente\n        \n         \n          Autor/a\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\n\n\n\n\n\nIm√°genes con stabilityAI\n\n\nAprendiendo c√≥mo generar im√°genes con R y stabilityAI. Este es uno de los ejercicios que hicimos en clase y creo que les gust√≥ a los estudiantes. \n\n\n\nIA\n\n\nstabilityAI\n\n\nim√°genes\n\n\n\n\n\n\n\n\n\n1 mar 2024\n\n\nPedro J. P√©rez\n\n\n4 minutos\n\n\n\n\n\n\n\n\n\n\n\n\nGeolocalizaci√≥n con R\n\n\nAprendiendo c√≥mo geolocalizar con R. Suele ser otro de los ejercicios que hago en clase \n\n\n\nGIS\n\n\ngeolocalizacion\n\n\nmapas\n\n\n\n\n\n\n\n\n\n5 mar 2024\n\n\nPedro J. P√©rez\n\n\n8 minutos\n\n\n\n\n\n\n\n\n\n\n\n\nDatos para los trabajos\n\n\nUn listado donde encontrar datos para los trabajos de clase. \n\n\n\ndatos\n\n\n\n\n\n\n\n\n\n6 mar 2024\n\n\nPedro J. P√©rez\n\n\n6 minutos\n\n\n\n\n\n\nNo hay resultados"
  },
  {
    "objectID": "license.html",
    "href": "license.html",
    "title": "Licencia",
    "section": "",
    "text": "My posts from the blogs R & flowers and TBits are released under a Creative Commons Attribution-ShareAlike 4.0 International License."
  }
]