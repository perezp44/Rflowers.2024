{
  "hash": "28ded9d5ee34e00310ee59efbb0a3f9b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"¿Donde están las obras de Goya?\"\nauthor: \"Pedro J. Pérez\"\nformat:\n  html:\n    page-layout: full\n    #theme: ember.scss  #- de danielle Navarro(https://blog.djnavarro.net/posts/2022-04-20_porting-to-quarto/)\n    theme: \n      - cosmo #sketchy #slate #- litera  superhero darkly\n    toc: true\n    code-line-numbers: true\n    code-copy: true\n    #code-overflow: wrap    #- {wrap, scroll}\n    code-fold: true\n    code-tools: false\n    #code-summary: \"Show the code\"\n    code-link: true\n    link-external-newwindow: true\n    highlight: github\n    \nlang: es   #- {es, en}\n---\n\n\n\n\n## Intro\n\nCreo/espero que, en breve, hagamos un trabajo medio serio sobre sesgo de genero en premios literarios, será algo relacionado con [esto](https://perezp44.github.io/slides.2023/jornadasR_2023_barcelona/index.html#/title-slide) pero más en formato artículo científico.\n\nPara ello, necesito refrescar cómo hacer consultas a [Wikidata](https://www.wikidata.org/), así que aquí voy a jugar un poco con Wikidata y [SPARQL](https://es.wikipedia.org/wiki/SPARQL) el lenguaje que permite hacer consultas a Wikidata. El objetivo es aprender o refrescar mis conocimientos de `SPARQL`.\n\nY, en lugar de empezar directamente a hacer consultas sobre premios literarios, se me ha ocurrido practicar recopilando datos sobre las obras de [Goya](https://es.wikipedia.org/wiki/Francisco_de_Goya) que están documentadas en Wikidata. La idea es hacer con ellos 2 ejercicios: 1) un mapa para ver como están repartidas por el mundo las obras de Goya, y 2) hacer un collage con todas, bueno, ya veremos si todas o solo con unas pocas, las obras de Goya que tengan una imagen accesible desde Wikidata.\n\n\nPero ¿y esto no está ya hecho? No lo sé, seguramente sí, pero seguro que también de forma diferente a como lo voy a hacer yo. Os recuerdo que yo no soy para nada un experto en Goya: repito, el objetivo del post solamente es aprender/recordar a hacer consultas a Wikidata.\n\nY ... ¿porqué Goya? Pues porque me gusta Goya; ¿a quien no? ¿verdad? Además, soy aragonés y he estado en Fuendetodos y ...  además, hace como 2 años, se hizo un taller sobre Goya en mi pueblo, [Pancrudo](https://www.pancrudo.com/). Uno de los encargados del taller era mi sobrino [David Sancho](https://davidsancho83.myportfolio.com/) ... además, una de las ilustraciones del taller era el cuadro de Goya [Niños con perros de presa](https://fundaciongoyaenaragon.es/obra/ninos-con-perros-de-presa/64). En el cuadro se ven 2 niños y **2 mastines**. ¿Eres capaz de ver el segundo mastín? nosotros no lo veíamos hasta que otro sobrino mio, Adríán Tena, se dio cuenta. Vamos que me ha salido \"espontaneo\" hacer el post sobre Goya, aunque el objetivo es *to learn sobre Wikidata y SPARQL*.\n\n\n<br>\n\n## Obras de Goya\n\nAntes de ir a Wikidata he mirado en la Web para documentarme un poco sobre Goya y sus obras. Lo primero que me hubiese gustado saber es cuantas obras de Goya, pero no me ha resultado fácil averiguarlo. En la [Fundación Goya en Aragón](https://fundaciongoyaenaragon.es/) hay un [catálogo](https://fundaciongoyaenaragon.es/catalogo/) pero en el poco tiempo que le he dedicado no he podido ver el número de obras que contiene. Igual les pregunto por mail. Vorem!! \n\nLo segundo que se me ha ocurrido es preguntar a una IA y me ha contestado lo siguiente:\n\n> Es difícil proporcionar un número exacto de obras de Francisco de Goya en el mundo, ya que su obra es extensa y algunas piezas pueden estar en colecciones privadas o en lugares menos accesibles. Sin embargo, se estima que Goya produjo alrededor de 700 pinturas y más de 2800 dibujos a lo largo de su carrera. \n\n\nDespués he ido a la Wikipedia y he encontrado un [anexo](https://es.wikipedia.org/wiki/Anexo:Cuadros_de_Goya) con 422 cuadros/obras de Goya. Además, también en la Wikipedia, hay una [categoría de \"Cuadros de Goya\"](https://es.wikipedia.org/wiki/Categor%C3%ADa:Cuadros_de_Francisco_de_Goya) con 143 registros, así que parece que hay 143 obras de Goya con su propia página en Wikipedia; por ejemplo [aquí](https://es.wikipedia.org/wiki/La_captura_del_bandido_%E2%80%9CMaragato%E2%80%9D_por_fray_Pedro_de_Zaldivia) está en la página de Wikipedia  del cuadro  titulado \"La captura del bandido 'Maragato' por fray Pedro de Zaldivia\".^[En realidad, \"La captura del bandido Maragato por fray Pedro de Zaldivia\", es una serie de 6 cuadros.]\n\nComo veis, no es tan-tan fácil^[Al menos no ha sido instantáneo para mi.] obtener, para un profano en el tema, el número de obras de Goya que existen en el mundo. \n\nRepito, mi objetivo es simplemente ver cuantas obras de Goya están registradas en Wikidata y jugar un poco con ellas para recordar SPARQL.\n\nLos ítems/objetos de Wikidata pueden tener identificadores que los conectan a bases de datos externas; por ejemplo, algunas de las obras de Goya existentes en Wikidata tienen un identificador que los vincula con la base de datos de la [Fundación Goya en Aragón](https://fundaciongoyaenaragon.es/). El código de Wikidata para el identificador es [P7229](https://www.wikidata.org/wiki/Property:P7229).\n\n<br>\n\n## Obras de Goya en Wikidata\n\nSí buscamos el número de obras de Goya en Wikidata, podemos hacerlo con la siguiente consulta SPARQL:\n\n```sql\n#obras de Goya\nSELECT DISTINCT ?item ?itemLabel ?itemDescription\nWHERE {\n    ?item  wdt:P170 wd:Q5432.   # items cuyo creador es Goya\n    SERVICE wikibase:label { bd:serviceParam wikibase:language \"es\", \"en\", \"de\", \"fr\", \"it\" }\n}\n```\n\nSi quieres ejecutar la consulta, puedes hacerlo [aquí](https://w.wiki/9Y$M).^[Sólo tienes que pinchar en la flecha/triangulito.] En su día, en marzo de 2024, yo obtuve **1.052 registros**. Estas son las obras de Goya que están registradas en Wikidata. Muchas menos de las que me dijo la IA.\n\n\nPues ya estaría, pero ... vamos a enriquecer un poco más la información sobre estas obras; voy a tratar de incorporar información sobre donde está el cuadro/obra (museo, ciudad y país), cuando se creó, si existe una imagen de la obra en Wikidata, etc ...\n\nAl final me decidí por esta consulta: \n\n\n::: {.cell}\n\n```{.sql .cell-code}\n#obras de Goya\nSELECT DISTINCT ?item ?itemLabel ?itemDescription  ?paisLabel ?ciudadLabel ?link_esp ?link_eng \n                ?ubicacionLabel ?long ?lat ?idGoya ?image  (year(?date) as ?year) \nWHERE {\n    ?item  wdt:P170 wd:Q5432;   # items cuyo creador es Goya\n           wdt:P276 ?ubicacion.  \n\n    ?ubicacion wdt:P131 ?ciudad.\n    ?ciudad wdt:P17 ?pais.\n  \n    ?ubicacion p:P625 ?coords .\n    ?coords psv:P625 ?coordinate_node .\n    ?coordinate_node wikibase:geoLatitude ?lat .\n    ?coordinate_node wikibase:geoLongitude ?long .               \n  \n    OPTIONAL { ?item wdt:P7229 ?idGoya}       # id en Fundación Goya en Aragón\n    OPTIONAL { ?item wdt:P18 ?image }         # con imagen\n    OPTIONAL { ?item wdt:P571 ?date }         # con fecha de creacion\n    #OPTIONAL { ?item wdt:P195/wdt:P361* ?coleccion }  # la colección\n\n    OPTIONAL {  ?link_esp schema:about ?item;\n         schema:isPartOf <https://es.wikipedia.org/>;} #- link en Wikipedia española\n    OPTIONAL {  ?link_eng schema:about ?item;\n         schema:isPartOf <https://en.wikipedia.org/>;} #- link en Wikipedia inglesa\n \n    SERVICE wikibase:label { bd:serviceParam wikibase:language \"es\", \"en\", \"de\", \"fr\", \"it\" }\n}\n\nORDER BY desc(?year)\n```\n:::\n\n\n\nLa query la fui refinando en el [Wikidata Query Serive](https://query.wikidata.org/), pero cuando tuve la versión final, ejecute la consulta desde R con la función `wikifacts::wiki_query()`. Algo como:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_query_goya <- '#obras de Goya\nSELECT DISTINCT ?item ?itemLabel ?itemDescription  ?paisLabel ?ciudadLabel ?link_esp ?link_eng \n                ?ubicacionLabel ?long ?lat ?idGoya ?image  (year(?date) as ?year) \nWHERE {\n    ?item  wdt:P170 wd:Q5432;   # items cuyo creador es Goya\n           wdt:P276 ?ubicacion.  \n\n    ?ubicacion wdt:P131 ?ciudad.\n    ?ciudad wdt:P17 ?pais.\n  \n    ?ubicacion p:P625 ?coords .\n    ?coords psv:P625 ?coordinate_node .\n    ?coordinate_node wikibase:geoLatitude ?lat .\n    ?coordinate_node wikibase:geoLongitude ?long .               \n  \n    OPTIONAL { ?item wdt:P7229 ?idGoya}       # id en Fundación Goya en Aragón\n    OPTIONAL { ?item wdt:P18 ?image }         # con imagen\n    OPTIONAL { ?item wdt:P571 ?date }         # con fecha de creacion\n    #OPTIONAL { ?item wdt:P195/wdt:P361* ?coleccion }  # la colección\n\n    OPTIONAL {  ?link_esp schema:about ?item;\n         schema:isPartOf <https://es.wikipedia.org/>;} #- link en Wikipedia española\n    OPTIONAL {  ?link_eng schema:about ?item;\n         schema:isPartOf <https://en.wikipedia.org/>;} #- link en Wikipedia inglesa\n \n    SERVICE wikibase:label { bd:serviceParam wikibase:language \"es\", \"en\", \"de\", \"fr\", \"it\" }\n}\n\nORDER BY desc(?year)'\n\ndf_goya <- wikifacts::wiki_query(my_query_goya)  \n```\n:::\n\n\n\nLa consulta la hice el 25 de marzo de 2024 obteniendo **1.088 registros**, pero hay que tener en cuenta que no son registros únicos de obras de Goya porque pueden haber obras de Goya en Wikidata con, por ejemplo, 2 registros para las coordenadas, o para la fecha de creación, o ...^[Sí, ni el mundo ni Wikidata son perfectos, pero ... el mundo es, de momento, el único que tenemos y Wikidata es, a pesar de todos sus \"fallos\", **super-FABULOSA**. Ojala mejoren los 2, tanto el mundo como Wikidata!!]. \n\nRealmente con mi \"final-query\" conseguí recuperar **799 obras de Goya distintas**. ¿Que porqué 799 si con la primera query salían 1.052 obras? Pues porqué en mi query final obligo a que las obras tengan registrado donde se encuentran; es decir, su localización. Recuerda que el objetivo es ver en un mapa donde están las obras actualmente y despues hacer un collage con las que tengan imagen.\n\n\n## ¿Donde están las obras de Goya?\n\nYa Tengo los datos de las obras de Goya en Wikidata que tienen registrada su localización, pero antes de mirarlos, he buscado en la Web y he encontrado artículos/posts que hablan del tema. Por ejemplo:\n\n- [Dónde ver los cuadros de Goya a lo largo del mundo](https://www.liligo.es/magazine-viajes/donde-ver-los-cuadros-de-goya-a-lo-largo-del-mundo-164709.html)], en este post del \"El Magazine del Viajero\" se indican los 6 museos donde más obras de Goya hay: Museo del Prado, Museo Lázaro Galdiano (Madrid), Museo de la Academia de Bellas Artes de San Fernando (Madrid), National Gallery (Londres), Metropolitan Museum of Art de Nueva York y National Gallery de Washington, además de señalar los principales cuadros de Goya existentes en ellos; \n\n- [Goyas por el mundo: todos los lugares (que no son pocos) a los que llega el pintor aragonés](https://www.enjoyzaragoza.es/goyas-por-el-mundo/) es un post de \"Enjoy Zaragoza\" donde indica los principales museos del mundo, empezando por los de Aragón, donde se pueden ver obras de Goya\n\n- [La capital a pinceladas de Francisco de Goya](https://www.guiarepsol.com/es/viajar/nos-gusta/el-madrid-de-goya/) \n- [Goya en Madrid: una ruta por sus obras maestras en la capital](https://saltaconmigo.com/blog/2020/09/goya-en-madrid/),\n\n- [Los 5 lugares donde ver obras de Francisco de Goya sin salir de Zaragoza](https://hoyaragon.es/cultura-aragon/donde-ver-obras-de-goya-en-zaragoza/).\n\n\nTodos ellos muy interesantes pero ... me hubiese gustado ver algo más cuantitativo, algo como una tabla con el número de obras que hay en cada museo. Vamos a ello.\n\n\nOs recuerdo que tengo información de la localización (museo, ciudad y país) de 799 obras de Goya que están registradas en Wikidata. Vamos a ver cuantas obras hay en cada museo. \n\nComo no puede ser de otra manera, hay 14 obras de Goya que en Wikidata figuran que están en varios museos , por ejemplo, [Contra el bien general](https://www.wikidata.org/wiki/Q47533444) tiene registradas en Wikidata 3 ubicaciones: Museo Boymans Van Beuningen,  Chester Beatty Library y  Museo de Arte de Cleveland. ¿Qué donde está realmente? No lo sé, he mirado un poco y creo que está en Cleveland pero ... no estoy seguro. Recodad que soy un profano en Goya y el objetivo es solo jugar un poco: aún así creo que lo que salga va a ser interesante.\n\nOtros \"fallos\" son debidos a mis conocimientos de Wikidata y SPARQL; por ejemplo, el cuadro [La familia de Carlos IV](https://www.wikidata.org/wiki/Q920030) figuar en Wikidata en 2 ubicaciones: Museo del Prado y Palacio Real. ¿Qué donde está? pues en la actualidad en el Museo del Prado, pero en 1814, según Wikidata, estaba en el palacio Real. Podría haber filtrado las ubicaciones para que mi consulta solo recogiese la ubicación actual, pero no se me ocurrió y ahora ya quiero ir cerrando el post. Lo tendre en cuenta para proximas consultas a Wikidata.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_ruta_datos_orig <- fs::dir_ls(here::here(\"datos\", \"orig_wikidata\"))\ndf_orig <- rio::import(my_ruta_datos_orig)\n```\n:::\n\n\n\nPara ver las 14 obras registradas en Wikidata en más de un museo hay que correr este chunk:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nzz_varios_museos_id <- df_orig %>% \n  distinct(item, itemLabel, ubicacionLabel) %>% \n  group_by(item, itemLabel) %>% summarise(n = n()) %>% arrange(desc(n)) %>% filter(n > 1)  %>% pull(1)\n\n\nzz_varios_museos <- df_orig %>% filter(item %in% zz_varios_museos_id) %>% \n  select(1:2, paisLabel, ciudadLabel, ubicacionLabel) %>% distinct()\n\ngt::gt(zz_varios_museos)\n```\n:::\n\n\n\nLo mismo ocurre con la ciudad en la que figura que está ubicadas las obras de Goya: hay 35 obras que en mi consulta a Wikidata figuran como que están en 2 \"municipios\". En realidad lo que se recoge es el barrio o distrito de la ciudad y la ciudad^[Como veís este fallo tambíen se debe a que Wikidata muchas veces tiene información muy precisa y exhaustiva junto a que mis conocimientos de la taxonomía de Wikidata y de SPARQL los tengo un poco oxidados, pero estoy prácticando!!. Esto también podía haberlo evitado, o eso creo, puliendo un poco más mi consulta a Wikidata, pero también lo tendré en cuenta en futuras consultas. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n##- cuadros en varios ciudades ----\nzz_varias_ciudades_id <- df_orig %>%  #- obtengo los id's de los cuadros que están en varios ciudades\n  distinct(item, itemLabel, ciudadLabel) %>% \n  group_by(item, itemLabel) %>% summarise(n = n()) %>% \n  arrange(desc(n)) %>% filter(n > 1)  %>% pull(1) #- 35 id's\n\n# veo los cuadros q están en varios museos\nzz_varias_ciudades <- df_orig %>% filter(item %in% zz_varias_ciudades_id) %>% \n  select(1:2, paisLabel, ciudadLabel, ubicacionLabel) %>% distinct()  #- 74 registros\n\ngt::gt(zz_varias_ciudades)\n```\n:::\n\n\nDespués de todo esto, me quedo con un conjunto de datos con 756 obras de Goya que sabemos en que museo, ciudad y país están; al menos según lo que dice Wikidata. Veamos donde están. LO primero un mapa, muy sencillito, algún día lo mejoraré!!\n\n\n::: {.cell}\n\n:::\n\n\nEl mapa es muy sencillito, se podría mejorar mucho, haciendo que en los popups aparezca el número de obras en cada museo etc... etc... pero ... no tengo tiempo, ni ganas, de hacerlo ahora. Eso sí, a pesar de ser sencillito se ve que si quieres ver Goyas no te vayas a África. Si la información de Wikidata es cierta, en Sudamérica solo se pueden ver Goyas en Argentina, concretamente 5 en Buenos Aires y 1 en Rosario. \n\n\nSoi haces zoom en el mapa parece que en Madrid hay 10 lugares/museos donde ver obras de Goya, y en Zaragoza 4, seguramente haya más, pero estos son los datos de los que dispongo.\n\n.",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}