{
  "hash": "050fc55699a50563743ef838a1dc9a3b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Delitos en España (II): una comparativa internacional\"\nsubtitle: | \n  ESte segundo post sobre incidencia delictiva en España haré una comparación de los datos de delitos en España con los de otros países usando datos de la UNDOC. En términos coloquiales pretendo intentar dar una respuesta a la pregunta: ¿es España un país seguro?\ndate: 2025-03-07\ncategories: [delitos]\nimage: \"imagenes/thumbnail_resized.png\"\nbibliography: references.bib\nnocite: |\n  @*\n---\n\n\n\n\n\n## Intro\n\nEn este post voy a utilizar los datos de la la Oficina de las Naciones Unidas para drogas y crimen ([UNDOC](https://www.unodc.org/)) sobre delitos para ver la situación de España en estos temas. Ya conté cómo procese estos datos en el anterior post, concretamente [aquí](../2025-01-29_delitos-01-inicio/#undoc){target=\"_blank\"}.\n\nSolo recordaré  aquí que los datos de la UNDOC contienen observaciones de 212 países/regiones sobre 27 tipos de delitos para el periodo 1990-2023; aunque es evidente que solo algunos países presentan datos para todos los indicadores y periodo muestral. Lo vamos viendo poco a poco.\n\n## Un vistazo rápido a los datos\n\n\n### Categorías de delitos\n\nEntre los datos que me llamaron la atención (y que voy a procesar) están las categorías:\n\n::: {.column-margin}\nMe centré en 3 categorías de delitos, descargando y procesando un total de  [27 tipos de delitos]{.underline}\n:::\n\n-   **Intentional Homicide**: los datos están [aquí](https://dataunodc.un.org/dp-intentional-homicide-victims). Son datos con mucho detalle porque tiene posibilidad de filtrar por genero, edad, medio, situación etc... etc... pero me centré en un **único indicador** sin tener en cuenta los \"detalles\": \"Victims of intentional homicide\"\n\n\n-   **Violent & Sexual Crime**: los datos están [aquí](https://dataunodc.un.org/dp-crime-violent-offences). Contienen también mucho detalle, pero me centré en procesar [10 indicadores]{.underline}: Serious assault, Kidnapping, Sexual violence, Sexual violence: Rape, Sexual violence: Sexual assault, Sexual violence: Other acts of sexual violence, Sexual Exploitation, Acts intended to induce fear or emotional distress y Acts intended to induce fear or emotional distress: Cyber-related\n\n-   **Corruption & Economic Crime**: los datos están [aquí](https://dataunodc.un.org/dp-crime-corruption-offences). Contienen [16 indicadores]{.underline}: Corruption, Corruption: Bribery, Corruption: Other acts of corruption, Smuggling of migrants, Burglary, Theft, Theft: of a motorized vehicle, Fraud, Fraud: Cyber-related (Cy), Money laundering, Unlawful access to a computer system, Unlawful interference with a computer system or computer data, Acts that cause environmental pollution or degradation, Acts involving the movement of dumping of waste, Trade or possession of protected or prohibited species of faune and flora, Acts that result in the depletion of degradation of natural resources\n\nAdemás, no los voy a procesar, pero también me llamó la atención la categoría:\n\n-   **Prisons & Prisoners**: los datos están [aquí](https://dataunodc.un.org/dp-prisons-persons-held). Contiene datos sobre personas en la carcel por Intentional Homicide, Rape, Drug trafficking y Bribery; además diferencia entre personas con y sin sentencia, etc ... etc ...\n\n<br>\n\n### Procesamiento de los datos\n\nLos datos los descargué en febrero de 2025 y los procesé con el script `/my_mungings.2024a/blog_01_INE/007_UNDOC_crimenes/02_fusionar-y-exportar-datos_UNdoc.R`. Allí generé 2 conjuntos de datos que posteriormente alojé en mi paquete de datos `pjpv.pkg.datos.2024`; concretamente son los ficheros:\n\n\n1.  `delitos_UNDOC_tipologia_delitos_2023`: contiene datos de 1990 a 2023 de 212 países (o regiones) sobre 27 tipos de delitos. Es el conjunto de datos que voy a usar en el post\n\n2. `delitos_UNDOC_tipologia_delitos_2023_relacion`; contiene datos de 2013 a 2022 de 49 países sobre 2 tipos de delitos: Victims of serious assault y Victims of sexual violence. En este data.frame que mantuve la información sobre la relación de la victima con el perpretador del delito, pero finalmente no voy a usar estos datos\n\nEn este post solo voy a usar los datos del primer dataset. Los 27 tipos de delitos que contiene son:\n\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nzz <- pjpv.pkg.datos.2024::delitos_UNDOC_tipologia_delitos_2023 |>\n  dplyr::distinct(indicator, category)\nDT::datatable(zz)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"datatables html-widget html-fill-item\" id=\"htmlwidget-f0bfc08308a56544df8d\" style=\"width:100%;height:auto;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-f0bfc08308a56544df8d\">{\"x\":{\"filter\":\"none\",\"vertical\":false,\"data\":[[\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"10\",\"11\",\"12\",\"13\",\"14\",\"15\",\"16\",\"17\",\"18\",\"19\",\"20\",\"21\",\"22\",\"23\",\"24\",\"25\",\"26\",\"27\"],[\"Violent offences\",\"Violent offences\",\"Violent offences\",\"Violent offences\",\"Violent offences\",\"Violent offences\",\"Violent offences\",\"Violent offences\",\"Violent offences\",\"Victims of intentional homicide\",\"Offences\",\"Offences\",\"Offences\",\"Offences\",\"Offences\",\"Offences\",\"Offences\",\"Offences\",\"Offences\",\"Offences\",\"Offences\",\"Offences\",\"Offences\",\"Acts against the environment\",\"Acts against the environment\",\"Acts against the environment\",\"Acts against the environment\"],[\"Serious assault\",\"Kidnapping\",\"Sexual violence\",\"Sexual violence: Rape\",\"Sexual violence: Sexual assault\",\"Sexual violence: Other acts of sexual violence\",\"Sexual Exploitation\",\"Acts intended to induce fear or emotional distress\",\"Acts intended to induce fear or emotional distress: Cyber-related\",\"Victims of intentional homicide\",\"Corruption\",\"Corruption: Bribery\",\"Corruption: Other acts of corruption\",\"Smuggling of migrants\",\"Burglary\",\"Theft\",\"Theft: of a motorized vehicle\",\"Fraud\",\"Fraud: Cyber-related (Cy)\",\"Money laundering\",\"Unlawful access to a computer system\",\"Unlawful interference with a computer system or computer data\",\"Unlawful interception or access of computer data\",\"Acts that cause environmental pollution or degradation\",\"Acts involving the movement of dumping of waste\",\"Trade or possession of protected or prohibited species of faune and flora\",\"Acts that result in the depletion of degradation of natural resources\"]],\"container\":\"<table class=\\\"display\\\">\\n  <thead>\\n    <tr>\\n      <th> <\\/th>\\n      <th>indicator<\\/th>\\n      <th>category<\\/th>\\n    <\\/tr>\\n  <\\/thead>\\n<\\/table>\",\"options\":{\"columnDefs\":[{\"orderable\":false,\"targets\":0},{\"name\":\" \",\"targets\":0},{\"name\":\"indicator\",\"targets\":1},{\"name\":\"category\",\"targets\":2}],\"order\":[],\"autoWidth\":false,\"orderClasses\":false}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n\n\n\n### Más procesamiento de los datos\n\nComo he dicho más arriba, los datos que descargué de la UNDOC los procesé^[En realidad los datos tuvieron poco procesamiento, solo tuve que quitar y homogeneizar cositas y tener cuidado porque, en mi opinión los datos en este caso era \"demasiado largos\" y estaban como preparados para contener información de edad, genero, relación con el delincuente, etc... que a mi no me hacía falta] en mi blog local \"`my_mungins`\" y los 2 data.frames resultantes los alojé en mi paquete de datos. \n\nDespués de procesar los datos me di cuenta que solo iba a usar el dataset `delitos_UNDOC_tipologia_delitos_2023` que como he dicho, contiene datos de 1990 a 2023 de 212 países (o regiones) sobre 27 tipos de delitos. También me di cuenta que iba a necesitar geometrías de esos 212 países/regiones para poder hacer coropletas. \n\n#### geometrías\n\nPara obtener geometrías utilice el paquete [giscoR](https://ropengov.github.io/giscoR/) que facilita usar en R los datos de GISCO, the Geographic Information System de la Commisión Europea. Concretamente utilice este dataset que contiene 259 geometrías\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nworld <- giscoR::gisco_get_countries(year = 2024) %>% \n  select(ISO3_CODE, CNTR_ID, NAME_ENGL, CAPT, SVRG_UN, EU_STAT, geometry)\n#- fusiono con crimenes\nworld_crime <- left_join(df, world, by = c(\"iso3_code\" = \"ISO3_CODE\")) \n```\n:::\n\n\n\nHe de recordar que en los datos que voy a usar de UNDOC habían 212 países/territorios. Cuando fusioné estos datos con las geometrías de GISCO, se obtuvieron las geometrías de 200 de ellos, pero quedaron sin fusionar 12 entidades territoriales. Habían 4 tipos de problemas:\n\n\n 1. Los datos de UNDOC para el Reino Unido estaban separados en 3 entidades (Escocia, Irlanda del Norte y el resto; es decir, Inglaterra y Gales).  Deje esos datos tal cual, pero a partir de ellos generé los datos para todo el Reino Unido. La geometría del Reino Unido sí se encontraba en GISCO, pero para obtener las geometrías de las 3 entidades territoriales originales para UK tuve que usar otro dataset de GISCO, concretamente:\n \n\n\n::: {.cell}\n\n```{.r .cell-code}\nUK_geo_3 <- giscoR::gisco_nuts %>% \n  filter(LEVL_CODE == 1)  %>% filter(CNTR_CODE == \"UK\") #- 12 geometrías para UK\n```\n:::\n\n\n \n \n \n \n 2. Los datos de UNDOC para Francia hacían referencia a Francia, pero también, para algunos delitos, a los territorios de ultramar franceses. En concreto hay datos para los siguientes territorios `\"France\", \"Guadeloupe\",  \"French Guiana\", \"Martinique\", \"Réunion\", \"Mayotte\", \"Saint Martin (French Part)\"`. Deje todos los datos tal cual, pero claro al intentar fusionar con las geometrías de GISCO, solo se fusionaba con `\"France\"`. Para encontrar geometrías para el resto de entidades francesas (los territorios de ultramar) tuve que usar otro dataset de GISCO, consiguiendo enlazar todas las entidades territoriales francesas excepto `\"Saint Martin (French Part)\"`. El dataset que usé fue: \n \n \n\n\n::: {.cell}\n\n```{.r .cell-code}\nfra_ultramar <- giscoR::gisco_nuts() %>% filter(LEVL_CODE == 2) %>% \n  filter(CNTR_CODE == \"FR\")  %>% \n  filter(NUTS_ID %in% c(\"FRY1\", \"FRY2\",\"FRY3\",\"FRY4\",\"FRY5\")) \n```\n:::\n\n\n \n\n \n 3. En los datos de delitos de la UNDOC hay datos referentes a Kosovo ( \"Kosovo under UNSCR 1244\"), con datos para algunos tipos de delitos para el periodo  de 2008 a 2021. Deje estos datos tal cual, pero no encontré su geometría en GISCO. Finalmente encontré geometría para Kosovo en otro dataset (no de GISCO) pero decidí no incorporarla al análisis;  es decir, los datos de Kosovo si estarán en el análisis pero no se mostrarán en las coropletas que vaya haciendo.\n \n\n 4. En el caso de Irak, los datos de delitos de la UNDOC, tienen 3 entidades territoriales: `\"Iraq\", \"Iraq (Kurdistan Region)\" e \"Iraq (Central Iraq)\"`. Decidí quitar las observaciones, no eran muchas, de `\"Iraq (Kurdistan Region)\" e \"Iraq (Central Iraq)\"`, dejando sólo las de \"Iraq\". Estas observaciones lógicamente se fusionaron con la geometría de Irak obtenida de GISCO. \n\n<br>\n\nTodo este trabajo de procesado de datos lo lleve a cabo con el script `01_anyadir-geometrias_y_exportar-datos_UNdoc.R`. Los datos finales que voy a usar en el análisis los exporte al fichero `datos_crim_blog_2025.Rdata` que contiene dos ficheros:\n\n1. `df_crimenes_ok`: contiene los datos de UNDOC originales, pero yo añadí los datos para el global de United Kingdom\n\n2. `geometrias_ok`: contiene las geometrías de GISCO (contiene también ñlas 3 entidades para UK y los territorios de ultramar franceses)\n\n<br>\n\n## Algunos resultados\n\nVoy a utilizar el dataset `delitos_UNDOC_tipologia_delitos_2023` que como dije, contiene datos de 27 tipos de delitos para un conjunto de 212 países. Es demasiado grande para poder mostrarlo todo, así que supongo que haré un [shiny](https://shiny.posit.co/) y aquí solo mostraré algunos resultados para ver cómo está España.\n\n### Coropletas\n\nVoy a empezar con el delito más grave: \"Victims of intentional homicide\". OK, solo un indicador, pero ... ¿qué año muestro? hay datos para el periodo 1990-2023, pero en 2023 solo hay 49 países con datos; mientras que para 2022 hay 101^[El año que más países tienen datos es 2008 con 165.\n\n### Tablas\n\n\n\n\n\n## Referencias {.unnumbered}\n\n::: {#refs}\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<link href=\"../../site_libs/datatables-css-0.0.0/datatables-crosstalk.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/datatables-binding-0.33/datatables.js\"></script>\n<script src=\"../../site_libs/jquery-3.6.0/jquery-3.6.0.min.js\"></script>\n<link href=\"../../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css\" rel=\"stylesheet\" />\n<link href=\"../../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js\"></script>\n<link href=\"../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}